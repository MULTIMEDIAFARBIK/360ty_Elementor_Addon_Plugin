{"version":3,"sources":["class-slides3-360ty.js","class-tourbuilder-360ty.js","index.js"],"names":["Slides3","parentID","Class_pano","pano_instance","elements","slides","startSlideIndex","pano_container_id","init","hasStartParam","parseHash","setParentContainer","createSlidesContainer","createBackgroundContainer","slidesContainer","setListeners","afterSlidesCreation","addSlideBackButton","backgroundContainer","createInstanceContainer","startSlide","getParentSlide","createPanoInstance","instanceContainer","id","pano_params","initSlide","homeslide","initHomeslide","goToHomeslide","setActiveSlide","document","getElementById","parentContainer","console","error","addPanoClass","addToSlideButtonContainer","slideIndex","element","classList","add","parent","children","buttonContainer","append","addToHomeslideTextContainer","textContainer","setStartSlide","createHomeSlide","homeslideContainer","createElement","div","addHomeslideTextContainer","scrollIndicator","addHomeslideScrollIndicator","navbar","addHomeslideNavbar","aboutContainer","createHomeslideAboutContainer","createSlide","slide","push","getRandomID","subslides","slide_div","basepath","addSlideButtonContainer","slideNav","addSlideNav","createSlideTextContainer","length","createSubSlide","parentSlideIndex","subslide","parentSlide","isSubslide","sub","addHomeslideHeadline","text","headlineContainer","headline","innerText","addHomeslideParagraph","paragraphContainer","paragraph","lineBreak","addHomeslideStartSlidesButton","button","onclick","setActiveSlideIndex","addSlideFacebookButton","link","window","open","addHomeslideBackgroundImage","url","style","backgroundImage","addSlideHeadline","addSlideDescription","description","addSlideFotograf","fotoParagraph","icon","fotograf_text","addSlideLocation","location","locationParagraf","location_text","addHomeslideBackgroundVideo","videoBackgroundContainer","videoForegroundContainer","videoElement","includes","src","autoplay","muted","loop","playsInline","allow","addHomeslideLogo","logo","addHomeslideSocialButton","social","li","target","href","iconAlt","querySelector","hash","startNum","substring","indexOf","parseInt","parseSearch","params","URLSearchParams","search","checkStartSlideIndex","log","parentElement","instanceContainerID","container","setTourPos","oldBasepath","setBasePath","setStartNode","node","setViewingParameter","fov","tilt","pan","reload","pano","startAutorotate","openNext","setFov","setPan","setTilt","instance_container_id","start_params","instance","setDimensions","setHorizontalAlignment","setSingleImage","setShareButtonVisibility","setImpressumVisibility","setDimensions_tablet","setHorizontalAlignment_tablet","setSingleImage_tablet","setShareButtonVisibility_tablet","setImpressumVisibility_tablet","setDimensions_mobile","setHorizontalAlignment_mobile","setSingleImage_mobile","setShareButtonVisibility_mobile","setImpressumVisibility_mobile","chars","split","Math","floor","random","str","i","createSubSlidePagination","navContainer","paginationContainer","paginationOL","subslide_pagination","forEach","updatePagination","updateActiveSubslidePaginationDot","updateActiveSlidePaginationDot","activeSlideIndex","LIs","querySelectorAll","contains","remove","createSlidePagination","slides_pagination","leftArrowContainer","leftArrow","activeIndex","newIndex","rightArrowContainer","rightArrow","getHashIndexValue","throttled","delay","fn","lastCall","args","now","Date","getTime","setHashListener","setScrollListener","setSwipeListeners","addEventListener","mousedown","e","touchstart","x","touches","clientX","y","clientY","handleMousemove","bind","handleMouseUp","swiping","absSlideValues","abs","movementX","movementY","xSwipeDirection","ySwipeDirection","swipeDirection","opacity","setHomeslideHash","preventDefault","handleTouchmove","xUp","yUp","xDiff","yDiff","handleScroll","currentHashVal","scrollDirection","wheelDeltaY","val","getComputedStyle","replace","newSlideIndex","setTimeout","newslide","oldslide","activeSlide","child","oldParams","newParams","newchild","addSlideStartButton","buttonText","pointerEvents","innerHTML","menu","menuList","createHomeslideNavButton","scrollTop","scrollHeight","label","callback","closeButton","addAboutUsHeadline","addAboutUsSubHeadline","subheadline","addAboutUsImage","imgContainer","img","alt","addAboutUsDescription","addPartners","partners","partnersContainer","seperator","seperatorSpan","partnerHeadline","partner","a","imgURL","cloneNode","Pano_360ty","constructor","parentContainerID","suffix","projectID","Promise","resolve","reject","products","fetch","json","err","deviceType","matchMedia","matches","name","toString","substr","elementIDs","panoContainer","impressumContainer","shareButton","FBshareButton","URLshareButton","slidesButton","class_shareButtons","buttonContainer_value_setter","targetValueSetter_button","class_valueSetter_button","impressum","tour_params","base_Tour","roll","movement_params","keyframes","loop_amount","movementAborted","addons_params","singleImage","share_buttons","show_impressum","responsive_params","tablet","tour_dimensions","width","height","horizontal_alignment","mobile","style_params","skin_variables","hovered_node","externalHotspotListenerSet","skin","controlsListener","wooProjectID","productPanels","getWebGLcontexts","contexts","canvas","getContext","pano_loaded","isLoaded","viewportMetaSet","head","meta","addMeta","includeStyle","tour_width","tour_height","horAlign","init_interval","setInterval","clearInterval","declareElements","setup_pano","setupButtons","createImpressum","setViewerSize","horizontallyAlignImage","addListeners","endsWith","startsWith","setWidth","setHeight","nodeNr","setRoll","bool","value","setWidth_tablet","setHeight_tablet","setWidth_mobile","setHeight_mobile","setSkinVariables","array_vars","obj_var","setMovementDelay","setMovementLoopAmount","addKeyframe","speed","lock_controls","keyframeParams","locked_controls","valid","checkKeyframeParams","clearwebglContext","removeChild","checkIncludedStyle","nodes","childNodes","link_list","childElementCount","nodeName","style_include","rel","appendChild","metaName","metaContent","content","createContainer","pano2vrPlayer","startNode","pano2vrSkin","readConfigUrlAsync","removeHotspots","stopAutorotate","changeSkinVars","pano_UpdateViewingParams","callAfterPanoLoaded","loadKeyframes","moveToKeyframes","moveToStartNode","getCurrentNode","promises","map","keyframe","frame","moveToKeyframe","frames","all","checkActiveMovement","setLock","moveTo","removeLockAfterMovement","getNodeIds","activeMov","F","active","variable","key","Object","entries","setVariableValue","type","lock_controls_interval","setLocked","setLockedWheel","setLockedMouse","setLockedKeyboard","pano_container","setAttribute","getBoundingClientRect","p","checkParameter","exceptions","check","prop","addHotspotListeners","hotspots","timesCalled","hn_interval","hotspot","hotspotURL","basePathStartIndex","basePathEndIndex","nodeIndex","nodeID","addListener","createShareButtons","shareButtonsInterval","callbackName","called","panoLoaded_interval","createButton","onclickEvent","style_display","copyShareUrlToClipboard","copyToClipboard","getShareURL","showShareButtons","display","shareOnFacebook","facebookURL","encodeURIComponent","leftPosition","visualViewport","screen","availWidth","topPosition","popUpSettings","win","focus","alertText","aux","body","select","execCommand","alert","shareUrl","getBasePath","getFov","getPan","getTilt","windowResizeListener","clearwebglContext_listener","isNaN","calculateAspectRatio","calcHeight_Precentage","containerSize","ratio","colonIndex","x_aspect","parseFloat","y_aspect","perc_height","calc_height","alignment","container_style","marginRight","marginLeft","getElementsByTagName","getExtension","loseContext","setProjectID","init_woo_panels","addWooCommerceProductPanels","then","addProductPanelsVisibilityListener","addProductNodeListener","catch","panels","getProductPanels","renderHotspots","createHotspotDot","hs_dot","hs_pulse","setHotspotDotsListener","$","createPanel","imgSrc","price","leftColumn","rightColumn","productDescriptionContainer","header","description_p","priceContainer","priceSpan","createProductHotspot","hsDiv","product_panel","panel","hsDot","position","hs_div","product","images","visibility","addHotspot","getHotspot","hs","currentPan","pan_diff","interval"],"mappings":"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","file":"src.96bac086.js","sourceRoot":"..\\src","sourcesContent":["export default function Slides3 (parentID){\r\n        this.parentID = parentID;\r\n        this.Class_pano = null;\r\n        this.pano_instance = null;\r\n        this.elements = {};\r\n        this.slides = [];\r\n        this.startSlideIndex = 0;\r\n        this.pano_container_id = \"pano_container\";\r\n\r\n    this.init = () =>{\r\n        let hasStartParam = this.parseHash();\r\n        this.setParentContainer(this.parentID);\r\n        this.createSlidesContainer();\r\n        this.createBackgroundContainer(this.elements.slidesContainer);\r\n        this.setListeners();\r\n        this.afterSlidesCreation();\r\n        this.addSlideBackButton(this.elements.backgroundContainer,\"zurck\");\r\n        this.createInstanceContainer(this.elements.backgroundContainer,this.pano_container_id);\r\n        let startSlide = this.getParentSlide(this.startSlideIndex);\r\n        this.createPanoInstance(this.Class_pano,this.elements.instanceContainer.id,startSlide.pano_params);\r\n        this.pano_instance.init();\r\n        this.initSlide(this.elements.slidesContainer);\r\n        if(this.homeslide){\r\n            this.initHomeslide();\r\n            if(!hasStartParam){\r\n                this.goToHomeslide();\r\n            }else{\r\n                this.setActiveSlide(this.startSlideIndex);\r\n            }\r\n        }else{\r\n            this.setActiveSlide(this.startSlideIndex);\r\n        }\r\n    }\r\n    //userInput\r\n    this.setParentContainer = (parentID) =>{\r\n        if(document.getElementById(parentID)){\r\n            this.elements.parentContainer=document.getElementById(parentID);\r\n        }else{\r\n            console.error(\"Element with ID \"+parentID+\" doesnt exist\")\r\n        }\r\n    }\r\n    this.addPanoClass = (Class_pano) => {\r\n        if(typeof(Class_pano) === \"function\"){\r\n            this.Class_pano = Class_pano;\r\n        }else{\r\n            console.error(\"given pano class isnt a class\")\r\n        }\r\n    }\r\n    this.addToSlideButtonContainer = (slideIndex,element) =>{\r\n        element.classList.add(\"slide-button\");\r\n        let parent = this.getParentSlide(slideIndex);\r\n        parent.children.buttonContainer.append(element);\r\n    }\r\n    this.addToHomeslideTextContainer = (element) =>{\r\n        this.homeslide.children.textContainer.append(element);\r\n    }\r\n    this.setStartSlide = (slideIndex)=>{\r\n        this.startSlideIndex = slideIndex;\r\n    }\r\n    this.createHomeSlide = (pano_params)=>{\r\n        let homeslideContainer = document.createElement(\"div\");\r\n        homeslideContainer.classList.add(\"inactive-homeslide\")\r\n        this.homeslide = {id:\"home\",div:homeslideContainer,pano_params:pano_params || {},children:{textContainer:this.addHomeslideTextContainer(),scrollIndicator:this.addHomeslideScrollIndicator(),navbar : this.addHomeslideNavbar(), aboutContainer : this.createHomeslideAboutContainer()}};\r\n    }\r\n    this.createSlide = (pano_params)=>{\r\n        let slide = document.createElement(\"div\");\r\n        slide.classList.add(\"active-slide\")\r\n        \r\n        this.slides.push({id:this.getRandomID(8),subslides:[],slide_div:slide,pano_params:pano_params || {basepath:\"https://lechwinter.360ty.cloud/\"}, children : { buttonContainer : this.addSlideButtonContainer(), slideNav : this.addSlideNav(), textContainer : this.createSlideTextContainer()}});\r\n        return this.slides.length -1;\r\n    }\r\n    this.createSubSlide = (parentSlideIndex,pano_params)=>{\r\n        let subslide = document.createElement(\"div\");\r\n        subslide.classList.add(\"active-slide\");\r\n        let parentSlide = this.slides[parentSlideIndex];\r\n        if(!parentSlide || parentSlide.isSubslide){\r\n            console.error(`slide with index ${parentSlideIndex} doesnt exist or is a subslide itself`);\r\n        }else{\r\n            parentSlide.subslides.push({id:this.getRandomID(8),isSubslide : true,slide_div:subslide,pano_params:pano_params || {basepath:\"https://lechwinter.360ty.cloud/\"}, children : { buttonContainer : this.addSlideButtonContainer(), slideNav : this.addSlideNav(), textContainer : this.createSlideTextContainer()}});\r\n            return {parent:parentSlideIndex,sub:parentSlide.subslides.length};\r\n        }\r\n    }\r\n    this.addHomeslideHeadline = (text)=>{\r\n        let headlineContainer = document.createElement(\"div\");\r\n        headlineContainer.classList.add(\"homeslide-header\");\r\n\r\n        let headline = document.createElement(\"h1\");\r\n        headline.innerText = text;\r\n        \r\n        headlineContainer.append(headline);\r\n        this.addToHomeslideTextContainer(headlineContainer);\r\n    }\r\n    this.addHomeslideParagraph = (text)=>{\r\n        let paragraphContainer = document.createElement(\"div\");\r\n        let paragraph = document.createElement(\"p\");\r\n        paragraph.innerText = text;\r\n        let lineBreak = document.createElement(\"br\");\r\n\r\n        paragraphContainer.append(paragraph);\r\n        paragraphContainer.append(lineBreak);\r\n        this.addToHomeslideTextContainer(paragraphContainer);\r\n    }\r\n    this.addHomeslideStartSlidesButton = (text)=>{\r\n        let button = document.createElement(\"button\");\r\n        button.innerText = text ||\"start\";\r\n        button.classList.add(\"homeslide-button-start\")\r\n        button.classList.add(\"slide-button\")\r\n        button.onclick = ()=>{\r\n            this.setActiveSlideIndex({parent:0,sub:0});\r\n        }\r\n        this.addToHomeslideTextContainer(button);\r\n    }\r\n\r\n    this.addSlideFacebookButton = (slideIndex,link)=>{\r\n        let button = document.createElement(\"button\");\r\n        button.innerText = \"share on Facebook\";\r\n        button.onclick = function(){\r\n            window.open(link, '_blank');\r\n        }\r\n        button.classList.add(\"slide-button-facebook\");\r\n        button.classList.add(\"slide-button\")\r\n        this.addToSlideButtonContainer(slideIndex,button)\r\n    }\r\n    this.addHomeslideBackgroundImage = (url)=>{\r\n        this.homeslide.div.style.backgroundImage = `url(${url})`;\r\n    }\r\n    this.addSlideHeadline=(slideIndex,text)=>{\r\n        let parent = this.getParentSlide(slideIndex);\r\n        let headline = document.createElement(\"h2\");\r\n        headline.innerText = text;\r\n        parent.children.textContainer.append(headline);\r\n    }\r\n    this.addSlideDescription=(slideIndex,text)=>{\r\n        let parent = this.getParentSlide(slideIndex);\r\n        let description = document.createElement(\"p\");\r\n        description.innerText = text;\r\n        parent.children.textContainer.append(description);\r\n    }\r\n    this.addSlideFotograf=(slideIndex, text)=>{\r\n        let parent = this.getParentSlide(slideIndex);\r\n\r\n        let fotoParagraph = document.createElement(\"p\");\r\n        fotoParagraph.classList.add(\"slide-icon-paragraph\");\r\n        \r\n        let icon = document.createElement(\"i\");\r\n        icon.classList.add(\"fa\");\r\n        icon.classList.add(\"fa-camera\")\r\n        \r\n        let fotograf_text = document.createElement(\"p\");\r\n        fotograf_text.classList.add(\"slide-fotograf\")\r\n        fotograf_text.innerText = text;\r\n        \r\n        fotoParagraph.append(icon)\r\n        fotoParagraph.append(fotograf_text)\r\n        parent.children.textContainer.append(fotoParagraph);\r\n    }\r\n    this.addSlideLocation=(slideIndex, location)=>{\r\n        let parent = this.getParentSlide(slideIndex);\r\n\r\n        let locationParagraf = document.createElement(\"p\");\r\n        locationParagraf.classList.add(\"slide-icon-paragraph\");\r\n        \r\n        let icon = document.createElement(\"i\");\r\n        icon.classList.add(\"fa\");\r\n        icon.classList.add(\"fa-location-arrow\");\r\n        \r\n        let location_text = document.createElement(\"p\");\r\n        location_text.classList.add(\"slide-location\");\r\n        location_text.innerText = location;\r\n        \r\n        locationParagraf.append(icon);\r\n        locationParagraf.append(location_text);\r\n        parent.children.textContainer.append(locationParagraf);\r\n    }\r\n    this.addHomeslideBackgroundVideo=(url)=>{\r\n        let videoBackgroundContainer = document.createElement(\"div\");\r\n        videoBackgroundContainer.classList.add(\"video-background\");\r\n        let videoForegroundContainer = document.createElement(\"div\");\r\n        videoForegroundContainer.classList.add(\"video-foreground\");\r\n\r\n        videoBackgroundContainer.append(videoForegroundContainer);\r\n\r\n        let videoElement;\r\n        if(url.includes(\"http\")){\r\n            videoElement = document.createElement(\"video\");\r\n            videoElement.classList.add(\"background-video-video\");\r\n            videoElement.src = url\r\n            videoElement.autoplay = true;\r\n            videoElement.muted = true;\r\n            videoElement.loop = true;\r\n            videoElement.playsInline = true;\r\n        }else{\r\n            videoElement = document.createElement(\"iframe\");\r\n            videoElement.classList.add(\"background-video-iframe\")\r\n            videoElement.src = `https://iframe.videodelivery.net/${url}?muted=true&loop=true&autoplay=true&controls=false`;\r\n            videoElement.allow = \"accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;\";\r\n        }\r\n        videoForegroundContainer.append(videoElement);\r\n        this.homeslide.div.append(videoBackgroundContainer); \r\n    }\r\n    this.addHomeslideLogo=(url)=>{\r\n        let logo = document.createElement(\"img\");\r\n        logo.classList.add(\"customer-logo\");\r\n        logo.src = url;\r\n        this.homeslide.div.append(logo);\r\n    }\r\n    this.addHomeslideSocialButton=(social,link)=>{       \r\n        let li = document.createElement(\"li\");\r\n        li.classList.add(\"social-menu\");\r\n \r\n        let button = document.createElement(\"a\");\r\n        button.classList.add(\"social\");\r\n        button.target= \"_blank\";\r\n        button.href = link;\r\n \r\n        let icon = document.createElement(\"i\");\r\n        icon.classList.add(\"fab\");\r\n        icon.classList.add(\"fa-\"+social);\r\n        \r\n        let iconAlt = document.createElement(\"span\");\r\n        iconAlt.innerText = social;\r\n \r\n        icon.append(iconAlt);\r\n        button.append(icon);\r\n        li.append(button);\r\n        this.homeslide.children.navbar.querySelector(\".menu-link\").querySelector(\"ul\").append(li);\r\n     }\r\n    \r\n    //userInput end\r\n    this.getParentSlide=(slideIndex)=>{\r\n        if(typeof(slideIndex)!==\"number\"){\r\n            if(slideIndex.sub === 0){\r\n                return this.slides[slideIndex.parent];\r\n            }else{\r\n                return this.slides[slideIndex.parent].subslides[slideIndex.sub -1];\r\n            }\r\n        }else{\r\n            return this.slides[slideIndex];\r\n        }\r\n    }\r\n    this.parseHash=()=>{\r\n        let hash= window.location.hash;\r\n        if(hash && hash.includes(\"Shot\")){\r\n            let startNum = hash.substring(hash.indexOf(\"Shot\")+4);\r\n            var parent = startNum.includes(\"-\") ? parseInt(startNum.substring(0,startNum.indexOf(\"-\")))-1 : parseInt(startNum)-1;\r\n            var sub = startNum.includes(\"-\") ? parseInt(startNum.substring(startNum.indexOf(\"-\")+1))-1 : 0;\r\n            this.setStartSlide({parent:parent,sub:sub || 0});\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n    this.parseSearch=()=>{\r\n        let params = new URLSearchParams(document.location.search.substring(1));\r\n\r\n    }\r\n    this.checkStartSlideIndex=()=>{\r\n        if(this.startSlideIndex >= this.slides.length -1){\r\n            this.startSlideIndex = 0;\r\n            console.log(\"invalid startSlideIndex: \"+this.startSlideIndex)\r\n        } \r\n    }\r\n    this.createBackgroundContainer=(parentElement)=>{\r\n        let backgroundContainer = document.createElement(\"div\");\r\n        backgroundContainer.classList.add(\"background-container\");\r\n        parentElement.append(backgroundContainer);\r\n        this.elements.backgroundContainer = backgroundContainer;\r\n    }\r\n    this.createInstanceContainer=(parentContainer,instanceContainerID)=>{\r\n        let container = document.createElement(\"div\");\r\n        container.classList.add(\"pano-container\")\r\n        container.id=instanceContainerID;\r\n        parentContainer.append(container);\r\n        this.elements.instanceContainer = container;\r\n    }\r\n    this.setTourPos=(params,oldBasepath)=>{\r\n        if(oldBasepath && oldBasepath !== params.basepath){\r\n            this.pano_instance.setBasePath(params.basepath)\r\n            this.pano_instance.setStartNode(params.node || 1);\r\n            this.pano_instance.setViewingParameter(params.fov || 70,params.tilt || 0,params.pan ||0);\r\n            this.pano_instance.reload();\r\n            this.pano_instance.pano.startAutorotate();\r\n        }else{\r\n                this.pano_instance.pano.openNext(`{node${params.node || 1}}`)\r\n            if(params.fov){\r\n                this.pano_instance.pano.setFov(params.fov)\r\n            }\r\n            if(params.pan){\r\n                this.pano_instance.pano.setPan(params.pan)\r\n            }\r\n            if(params.tilt){\r\n                this.pano_instance.pano.setTilt(params.tilt)\r\n            }\r\n        }\r\n    }\r\n    this.createPanoInstance=(Class_pano,instance_container_id,start_params)=>{\r\n        start_params = !start_params ? {} : start_params;\r\n        let instance = new Class_pano(instance_container_id,start_params.basepath);\r\n        instance.setDimensions(\"100%\",\"100%\");\r\n        instance.setHorizontalAlignment(\"center\");\r\n        instance.setStartNode(start_params.node || 70);\r\n        instance.setViewingParameter(start_params.fov || 70,start_params.tilt || 0,start_params.pan ||0);\r\n        instance.setSingleImage(false);\r\n        instance.setShareButtonVisibility(false);\r\n        instance.setImpressumVisibility(true);\r\n        instance.setDimensions_tablet(\"100%\",\"100%\");\r\n        instance.setHorizontalAlignment_tablet(\"center\");\r\n        instance.setSingleImage_tablet(false);\r\n        instance.setShareButtonVisibility_tablet(false);\r\n        instance.setImpressumVisibility_tablet(true);\r\n        instance.setDimensions_mobile(\"100%\",\"100%\");\r\n        instance.setHorizontalAlignment_mobile(\"center\");\r\n        instance.setSingleImage_mobile(false);\r\n        instance.setShareButtonVisibility_mobile(false);\r\n        instance.setImpressumVisibility_mobile(false);\r\n        this.pano_instance = instance;\r\n    }\r\n    this.createSlidesContainer=()=>{\r\n        let slidesContainer = document.createElement(\"div\");\r\n        slidesContainer.classList.add(\"slides\");\r\n        this.elements.parentContainer.append(slidesContainer);\r\n        this.elements.slidesContainer = slidesContainer;\r\n    }\r\n\r\n    this.initSlide=(parentElement)=>{\r\n        let slide = document.createElement(\"div\");\r\n        slide.classList.add(\"slide\");\r\n        parentElement.append(slide);\r\n        this.elements.slide = slide;\r\n    }\r\n    this.getRandomID = (length) => {\r\n        var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz'.split('');\r\n\r\n        if (! length) {\r\n            length = Math.floor(Math.random() * chars.length);\r\n        }\r\n    \r\n        var str = '';\r\n        for (var i = 0; i < length; i++) {\r\n            str += chars[Math.floor(Math.random() * chars.length)];\r\n        }\r\n        return str;\r\n    }\r\n    this.createSubSlidePagination = (parentSlideIndex)=>{\r\n        let navContainer = document.createElement(\"div\");\r\n        navContainer.classList.add(\"nav-container\")\r\n        let paginationContainer = document.createElement(\"div\");\r\n        paginationContainer.classList.add(\"subslide-pagination-container\");\r\n        let paginationOL = document.createElement(\"ol\");\r\n        for(let i = 0; i <=  this.slides[parentSlideIndex].subslides.length;i++){\r\n            let li = document.createElement(\"li\");\r\n            li.onclick=()=>{\r\n                this.setActiveSlideIndex({parent:parentSlideIndex,sub:i})\r\n            }\r\n            paginationOL.append(li)\r\n        }\r\n        paginationContainer.append(paginationOL);\r\n        navContainer.append(paginationContainer)\r\n        this.slides[parentSlideIndex].children.subslide_pagination = navContainer;\r\n        this.slides[parentSlideIndex].subslides.forEach((subslide)=>{\r\n            subslide.children.subslide_pagination = navContainer;\r\n        })\r\n    }\r\n    this.updatePagination=()=>{\r\n        this.updateActiveSubslidePaginationDot();\r\n        this.updateActiveSlidePaginationDot();\r\n    }\r\n    this.updateActiveSubslidePaginationDot=()=>{\r\n        let parent = this.getParentSlide(this.activeSlideIndex)\r\n        let LIs = parent.children.subslide_pagination.querySelector(\"ol\").querySelectorAll(\"li\");\r\n        LIs.forEach((li,i)=>{\r\n            if(this.activeSlideIndex.sub === i){\r\n                if(!li.classList.contains(\"active-dot\")){\r\n                    li.classList.add(\"active-dot\")\r\n                }\r\n            }else{\r\n                if(li.classList.contains(\"active-dot\")){\r\n                    li.classList.remove(\"active-dot\")\r\n                }\r\n            }\r\n        })\r\n        LIs[this.activeSlideIndex.sub].classList.add(\"active-dot\")\r\n    }\r\n    this.createSlidePagination=(slideIndex)=>{\r\n        let navContainer = document.createElement(\"div\");\r\n        navContainer.classList.add(\"nav-container\")\r\n        let paginationContainer = document.createElement(\"div\");\r\n        paginationContainer.classList.add(\"slide-pagination-container\");\r\n        let paginationOL = document.createElement(\"ol\");\r\n        this.slides.forEach((slide,i)=>{\r\n            let li = document.createElement(\"li\");\r\n            li.onclick=()=>{\r\n                this.setActiveSlideIndex({parent:i,sub:0})\r\n            }\r\n            paginationOL.append(li)\r\n        })\r\n        paginationContainer.append(paginationOL);\r\n        navContainer.append(paginationContainer)\r\n        this.slides[slideIndex].children.slides_pagination = navContainer;\r\n        this.slides[slideIndex].subslides.forEach((subslide)=>{\r\n            subslide.children.slides_pagination = navContainer;\r\n        })\r\n    }\r\n    this.updateActiveSlidePaginationDot=()=>{\r\n        let parent = this.getParentSlide(this.activeSlideIndex)\r\n        let LIs = parent.children.slides_pagination.querySelector(\"ol\").querySelectorAll(\"li\");\r\n        LIs[this.activeSlideIndex.parent].classList.add(\"active-dot\")\r\n    }\r\n    this.afterSlidesCreation=()=>{\r\n        this.slides.forEach((slide,i)=>{\r\n            this.createSubSlidePagination(i);\r\n            this.createSlidePagination(i);\r\n        })\r\n        this.checkStartSlideIndex();\r\n    }\r\n    this.addSlideNav=()=>{\r\n        let navContainer = document.createElement(\"div\");\r\n        navContainer.classList.add(\"nav-container\");\r\n\r\n        let leftArrowContainer = document.createElement(\"div\");\r\n        leftArrowContainer.classList.add(\"nav-left\");\r\n        let leftArrow = document.createElement(\"img\");\r\n        leftArrow.src = \"https://storage.googleapis.com/api.360ty.cloud/slides3/arrow.svg\";\r\n        leftArrowContainer.append(leftArrow);\r\n        leftArrow.onclick = ()=>{\r\n            let activeIndex = this.activeSlideIndex;\r\n            let newIndex = {parent:activeIndex.parent,sub:0};\r\n            if(!activeIndex.sub || activeIndex.sub === 0){\r\n                newIndex.sub = this.slides[activeIndex.parent].subslides.length -1;\r\n            }else{\r\n                newIndex.sub = activeIndex.sub -1;\r\n            }\r\n            this.setActiveSlideIndex(newIndex);\r\n        }\r\n\r\n        let rightArrowContainer = document.createElement(\"div\");\r\n        rightArrowContainer.classList.add(\"nav-right\");\r\n        let rightArrow = document.createElement(\"img\");\r\n        rightArrow.src = \"https://storage.googleapis.com/api.360ty.cloud/slides3/arrow.svg\";\r\n        rightArrowContainer.append(rightArrow);\r\n        rightArrow.onclick = ()=>{\r\n            let activeIndex = this.activeSlideIndex;\r\n            let newIndex = {parent:activeIndex.parent,sub:0};\r\n            if(activeIndex.sub >= this.slides[activeIndex.parent].subslides.length ){\r\n                newIndex.sub = 0;\r\n            }else{\r\n                newIndex.sub = activeIndex.sub +1;\r\n            }\r\n            this.setActiveSlideIndex(newIndex);\r\n        }\r\n        navContainer.append(leftArrowContainer);\r\n        navContainer.append(rightArrowContainer);\r\n        return navContainer;\r\n    }\r\n    this.getHashIndexValue=()=>{\r\n        let hash= window.location.hash;\r\n        if(hash && hash.includes(\"Shot\")){\r\n            let startNum = hash.substring(hash.indexOf(\"Shot\")+4);\r\n            var slide = startNum.includes(\"-\") ? parseInt(startNum.substring(0,startNum.indexOf(\"-\")))-1 : parseInt(startNum)-1;\r\n            var subslide = startNum.includes(\"-\") ? parseInt(startNum.substring(startNum.indexOf(\"-\")+1))-1 : 0;\r\n            return {parent:slide,sub:subslide};\r\n        }else if(hash && hash.includes(\"Home\")){\r\n            return \"Home\";\r\n        }else{\r\n            return {parent:0,sub:0};\r\n        }\r\n    }\r\n    this.throttled=(delay, fn)=> {\r\n        let lastCall = 0;\r\n        return function (...args) {\r\n          const now = (new Date).getTime();\r\n          if (now - lastCall < delay) {\r\n            return;\r\n          }\r\n          lastCall = now;\r\n          return fn(...args);\r\n        }\r\n      }\r\n      this.setListeners=()=>{\r\n        this.setHashListener();\r\n        this.setScrollListener();\r\n        this.setSwipeListeners();\r\n    }\r\n\r\n    this.setSwipeListeners=()=>{\r\n        this.elements.slidesContainer.addEventListener(\"mousedown\",()=>{this.mousedown = true});\r\n        this.elements.slidesContainer.addEventListener(\"touchstart\",(e)=>{\r\n            this.mousedown = true;\r\n            this.touchstart = {x:e.touches[0].clientX,y:e.touches[0].clientY}\r\n        });\r\n\r\n        this.elements.slidesContainer.addEventListener(\"mousemove\",this.throttled(100,this.handleMousemove.bind(this)))\r\n        this.elements.slidesContainer.addEventListener(\"touchmove\",this.throttled(100,this.handleMousemove.bind(this)))\r\n\r\n        this.elements.slidesContainer.addEventListener(\"mouseup\",this.handleMouseUp)\r\n        this.elements.slidesContainer.addEventListener(\"touchend\",this.handleMouseUp)\r\n\r\n\r\n    }\r\n    this.handleMouseUp=(e)=>{\r\n        if(!this.elements.backgroundContainer.classList.contains(\"foreground-container\") && this.swiping){\r\n                \r\n            let absSlideValues = {x:Math.abs(this.swiping.movementX),y:Math.abs(this.swiping.movementY)}\r\n            \r\n\r\n            let xSwipeDirection = this.swiping.movementX < 0 ? \"left\" : \"right\";\r\n            let ySwipeDirection = this.swiping.movementY < 0 ? \"up\" : \"down\";\r\n\r\n            let swipeDirection;\r\n\r\n            if(absSlideValues.x >= absSlideValues.y){\r\n                swipeDirection = xSwipeDirection;\r\n            }else{\r\n                swipeDirection = ySwipeDirection;\r\n            }\r\n\r\n            if(window.location.hash.includes(\"Home\")){\r\n                if(swipeDirection === \"up\"){\r\n                    if(this.homeslide && this.homeslide.div){\r\n                        this.homeslide.div.style.opacity = 0;\r\n                    }\r\n                    this.setActiveSlideIndex({parent:0,sub : 0})\r\n                }\r\n            }else{\r\n                switch(swipeDirection){\r\n                    case \"up\":\r\n                        if(this.slides[this.activeSlideIndex.parent+1]){\r\n                            this.setActiveSlideIndex({parent:this.activeSlideIndex.parent+1,sub : 0})\r\n                        }else{\r\n                            this.setActiveSlideIndex({parent:0,sub : 0})\r\n                        }\r\n                        break;\r\n                    case \"down\":\r\n                        if(this.activeSlideIndex.parent !== 0){\r\n                            this.setActiveSlideIndex({parent:this.activeSlideIndex.parent-1,sub : 0})\r\n                        }else{\r\n                            this.setHomeslideHash()\r\n                        }\r\n                        break;\r\n                    case \"left\":\r\n                        if(this.slides[this.activeSlideIndex.parent].subslides[this.activeSlideIndex.sub]){\r\n                            this.setActiveSlideIndex({parent:this.activeSlideIndex.parent,sub : this.activeSlideIndex.sub +1})\r\n                        }else{\r\n                            this.setActiveSlideIndex({parent:this.activeSlideIndex.parent,sub : 0})\r\n                        }\r\n                        break;\r\n                    case \"right\":\r\n                        if(this.activeSlideIndex.sub !== 0){\r\n                            this.setActiveSlideIndex({parent:this.activeSlideIndex.parent,sub : this.activeSlideIndex.sub -1})\r\n                        }else{\r\n                            this.setActiveSlideIndex({parent:this.activeSlideIndex.parent,sub : this.slides[this.activeSlideIndex.parent].subslides.length})\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            \r\n\r\n        }\r\n        this.swiping = false;\r\n        this.mousedown = false;\r\n    }\r\n    this.handleMousemove=(e)=>{\r\n        e.preventDefault();\r\n        if(!this.elements.backgroundContainer.classList.contains(\"foreground-container\") && this.mousedown && !this.homeslide.children.aboutContainer.classList.contains(\"about-open\")){\r\n            console.log(this.touchstart)\r\n            if(this.touchstart){\r\n                this.handleTouchmove(e,this.touchstart)\r\n            }else{\r\n                if(e.movementX > 15 || e.movementX < -15 || e.movementY > 15 || e.movementY < -15){   \r\n                    this.swiping = {movementX:e.movementX,movementY:e.movementY};\r\n                }\r\n            }\r\n        }\r\n    }\r\n    this.handleTouchmove=(e,touchstart)=>{\r\n        if(e.touches && e.touches.length !== 0){\r\n            var xUp = e.touches[0].clientX;                                    \r\n            var yUp = e.touches[0].clientY;\r\n        \r\n            var xDiff =  xUp - touchstart.x;\r\n            var yDiff =  yUp - touchstart.y;\r\n            this.swiping = {movementX:xDiff,movementY:yDiff};\r\n            console.log(this.swiping)\r\n        }\r\n    }\r\n    this.setScrollListener=()=>{\r\n        window.addEventListener(\"mousewheel\",this.throttled(500,this.handleScroll.bind(this)))\r\n    }\r\n    this.handleScroll=(e)=>{\r\n        if(!this.elements.backgroundContainer.classList.contains(\"foreground-container\") && !this.homeslide.children.aboutContainer.classList.contains(\"about-open\")){\r\n        let currentHashVal = this.getHashIndexValue();\r\n        let scrollDirection = e.wheelDeltaY >= 0 ? \"up\" : \"down\";\r\n        console.log(scrollDirection);\r\n        if(scrollDirection === \"down\"){\r\n            if(currentHashVal !== \"Home\"){\r\n                this.setActiveSlideIndex(this.slides.length > currentHashVal.parent+1 ? {parent:parseInt(currentHashVal.parent +1),sub:0} : {parent:0,sub:0})\r\n            }else{\r\n                this.setActiveSlideIndex({parent:0,sub:0})\r\n            }\r\n        }else{\r\n            if(currentHashVal.parent === 0){\r\n                this.setHomeslideHash()\r\n            }else{\r\n                if(currentHashVal !== \"Home\"){\r\n                    this.setActiveSlideIndex({parent:currentHashVal.parent-1,sub:currentHashVal.sub})\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n    }\r\n    this.setHashListener=()=>{\r\n        window.addEventListener(\"hashchange\",()=>{\r\n            let val = this.getHashIndexValue();\r\n            if(val === \"Home\"){\r\n                window.getComputedStyle(this.homeslide.div).opacity;\r\n                this.goToHomeslide()\r\n            }else{\r\n                if(this.homeslide && this.homeslide.children.aboutContainer.classList.contains(\"about-open\")){\r\n                    this.homeslide.children.aboutContainer.classList.replace(\"about-open\",\"about-closed\")\r\n                }\r\n                this.setActiveSlide(val);\r\n              \r\n            }\r\n        })\r\n    }\r\n    this.setActiveSlideIndex=(newSlideIndex)=>{\r\n        \r\n        if( this.elements.slide.classList.contains(\"inactive-slide\")){\r\n            this.elements.slide.classList.replace(\"inactive-slide\",\"slide\");\r\n        }\r\n       \r\n        if(this.homeslide && this.homeslide.div){\r\n            this.homeslide.div.style.opacity = 0;\r\n        }\r\n        setTimeout(()=>{\r\n            \r\n            window.location.hash=`Shot${newSlideIndex.parent + 1}-${newSlideIndex.sub + 1 || 1}`;\r\n           \r\n        },250)\r\n    }\r\n    this.setActiveSlide=(activeSlideIndex)=>{\r\n        if(this.homeslide.div.classList.contains(\"active-homeslide\")){\r\n            this.homeslide.div.classList.replace(\"active-homeslide\",\"inactive-homeslide\")\r\n        }\r\n        let newslide = activeSlideIndex.sub && activeSlideIndex.sub !== 0 ? this.slides[activeSlideIndex.parent].subslides[activeSlideIndex.sub -1] : this.slides[activeSlideIndex.parent];\r\n        if(!this.activeSlideIndex){\r\n            this.activeSlideIndex = activeSlideIndex;\r\n        }\r\n        let oldslide =  this.activeSlideIndex.sub && this.activeSlideIndex.sub !== 0 ? this.slides[this.activeSlideIndex.parent].subslides[this.activeSlideIndex.sub -1] : this.slides[this.activeSlideIndex.parent];\r\n        let slide_div = newslide.slide_div;\r\n        if(!this.elements.activeSlide){\r\n            this.elements.slide.append(slide_div);\r\n        }else{\r\n            for(let child in oldslide.children){\r\n                oldslide.children[child].remove();\r\n            }\r\n            let oldParams = oldslide.pano_params;\r\n            let oldBasepath = oldParams.basepath || \"https://lechwinter.360ty.cloud/\";\r\n            let newParams = newslide.pano_params || {basepath:\"https://lechwinter.360ty.cloud/\"}\r\n            this.setTourPos(newParams,oldBasepath);\r\n            this.elements.activeSlide.remove();\r\n        }\r\n        for(let newchild in newslide.children){\r\n            slide_div.append(newslide.children[newchild]);\r\n        }\r\n        this.elements.activeSlide = slide_div;\r\n        this.elements.activeSlide.style.opacity = 0;\r\n        this.elements.slide.append(this.elements.activeSlide)\r\n        window.getComputedStyle(this.elements.slide).opacity;\r\n        this.elements.activeSlide.style.opacity = 1;\r\n        this.activeSlideIndex = activeSlideIndex;\r\n        if(newslide.children.slides_pagination || newslide.children.subslide_pagination){\r\n            this.updatePagination()\r\n        }\r\n    }\r\n    this.initHomeslide=()=>{\r\n        for(let child in this.homeslide.children){\r\n            this.homeslide.div.append(this.homeslide.children[child]);\r\n        }\r\n        this.elements.slidesContainer.append(this.homeslide.div);\r\n    }\r\n    this.setHomeslideHash=()=>{\r\n        window.getComputedStyle(this.homeslide.div).opacity;\r\n        this.elements.activeSlide.style.opacity = 0;\r\n        setTimeout(()=>{\r\n            window.location.hash = \"Home\";\r\n            this.homeslide.div.opacity = 1;\r\n        },250)\r\n    }\r\n    this.goToHomeslide=()=>{\r\n        if(this.homeslide.div.classList.contains(\"inactive-homeslide\")){\r\n            this.homeslide.div.classList.replace(\"inactive-homeslide\",\"active-homeslide\")\r\n        }\r\n        \r\n        window.getComputedStyle(this.homeslide.div).opacity;\r\n        this.homeslide.div.style.opacity = 1;\r\n        if( this.elements.slide.classList.contains(\"slide\")){\r\n            this.elements.slide.classList.replace(\"slide\",\"inactive-slide\");\r\n        }\r\n    }\r\n    this.addSlideStartButton=(buttonText)=>{\r\n        let button = document.createElement(\"button\");\r\n        button.innerText = buttonText;\r\n        button.onclick = function(){\r\n            this.elements.slide.style.opacity = 0;\r\n            this.elements.slide.style.pointerEvents = \"none\";\r\n            setTimeout(()=>{\r\n                this.elements.backgroundContainer.classList.replace(\"background-container\",\"foreground-container\");\r\n            },500)\r\n        }.bind(this)\r\n        button.classList.add(\"slide-start-button\");\r\n        button.classList.add(\"slide-button\")\r\n        return button;\r\n    }\r\n    this.addSlideBackButton=(parentElement,buttonText)=>{\r\n        let button = document.createElement(\"button\");\r\n        button.innerText = buttonText;\r\n        button.onclick = function(){\r\n            parentElement.classList.replace(\"foreground-container\",\"background-container\");\r\n            this.elements.slide.style.pointerEvents = \"all\";\r\n            this.elements.slide.style.opacity = 1;\r\n        }.bind(this)\r\n        button.classList.add(\"slide-back-button\");\r\n        button.classList.add(\"slide-button\");\r\n        parentElement.append(button)\r\n    }\r\n    this.addSlideButtonContainer=()=>{\r\n        let buttonContainer = document.createElement(\"div\");\r\n        buttonContainer.classList.add(\"slide-button-container\");\r\n        return buttonContainer;\r\n    }\r\n    this.addHomeslideTextContainer=()=>{\r\n        let textContainer = document.createElement(\"div\");\r\n        textContainer.classList.add(\"homeslide-text-container\");\r\n        return textContainer;\r\n    }\r\n    this.addHomeslideScrollIndicator=()=>{\r\n        let scrollIndicator = document.createElement(\"a\");\r\n        scrollIndicator.classList.add(\"scroll-indicator\");\r\n        scrollIndicator.href=\"#Shot1\";\r\n        scrollIndicator.innerHTML = \r\n        `<span></span>\r\n        scroll\r\n        `;\r\n        return scrollIndicator;\r\n    }\r\n    this.addHomeslideNavbar=()=>{\r\n        let navbar = document.createElement(\"ul\");\r\n        navbar.classList.add(\"homeslide-navbar\");\r\n        let menu = document.createElement(\"li\");\r\n        menu.classList.add(\"menu-link\");\r\n        let menuList = document.createElement(\"ul\");\r\n        menuList.append(this.createHomeslideNavButton(\"ber uns\",()=>{\r\n            this.homeslide.children.aboutContainer.classList.replace(\"about-closed\",\"about-open\")\r\n            setTimeout(()=>{\r\n                this.homeslide.children.aboutContainer.scrollTop =  0;\r\n            },500)\r\n\r\n        }))\r\n        menuList.append(this.createHomeslideNavButton(\"partner\",()=>{\r\n            this.homeslide.children.aboutContainer.classList.replace(\"about-closed\",\"about-open\")\r\n            setTimeout(()=>{\r\n                this.homeslide.children.aboutContainer.scrollTop =  this.homeslide.children.aboutContainer.scrollHeight;\r\n            },500)\r\n\r\n        }))\r\n\r\n        menu.append(menuList);\r\n        navbar.append(menu);\r\n\r\n        return navbar;\r\n    }\r\n\r\n    this.createHomeslideNavButton = (label,callback) =>{\r\n        let li = document.createElement(\"li\");\r\n        li.classList.add(\"open-info\");\r\n\r\n        let button = document.createElement(\"a\");\r\n        button.classList.add(\"open-info\");\r\n        button.innerText=label;\r\n        button.onclick = callback\r\n\r\n        li.append(button)\r\n\r\n        return li;\r\n    }\r\n    this.createSlideTextContainer=()=>{\r\n        let container = document.createElement(\"div\");\r\n        container.classList.add(\"slide-text-container\");\r\n        return container\r\n    }\r\n    this.createHomeslideAboutContainer=()=>{\r\n        let container = document.createElement(\"div\");\r\n        container.classList.add(\"about-closed\");\r\n        let closeButton = document.createElement(\"button\");\r\n        closeButton.classList.add(\"close-content\");\r\n        closeButton.onclick = ()=>{\r\n            container.classList.replace(\"about-open\",\"about-closed\")\r\n        }\r\n        container.append(closeButton)\r\n        return container\r\n    }\r\n    this.addAboutUsHeadline = (text) =>{\r\n        let headline = document.createElement(\"h2\");\r\n        headline.innerText = text;\r\n\r\n        this.homeslide.children.aboutContainer.append(headline);\r\n    }\r\n    this.addAboutUsSubHeadline = (text) =>{\r\n        let subheadline = document.createElement(\"small\");\r\n        subheadline.innerText = text;\r\n\r\n        this.homeslide.children.aboutContainer.append(subheadline);\r\n    }\r\n    this.addAboutUsImage = (src) =>{\r\n        let imgContainer = document.createElement(\"div\");\r\n        imgContainer.classList.add(\"about-image\")\r\n        let img = document.createElement(\"img\");\r\n        img.src = src;\r\n        img.alt = \"About us Image\";\r\n\r\n        imgContainer.append(img);\r\n\r\n        this.homeslide.children.aboutContainer.append(imgContainer);\r\n    }\r\n    this.addAboutUsDescription = (text) =>{\r\n        let description = document.createElement(\"p\");\r\n        description.innerText = text;\r\n\r\n        this.homeslide.children.aboutContainer.append(description);\r\n    }\r\n    this.addPartners = (partners) =>{\r\n        let partnersContainer = document.createElement(\"div\");\r\n        partnersContainer.classList.add(\"partners\");\r\n\r\n        let seperator = document.createElement(\"div\");\r\n        let seperatorSpan = document.createElement(\"span\");\r\n        seperator.classList.add(\"seperator\");\r\n        seperator.append(seperatorSpan);\r\n        partnersContainer.append(seperator);\r\n\r\n        let partnerHeadline = document.createElement(\"h2\");\r\n        partnerHeadline.innerText=\"Partner\";\r\n        partnersContainer.append(partnerHeadline);\r\n        \r\n        partners.forEach((partner)=>{\r\n            let a = document.createElement(\"a\");\r\n            a.href = partner.link;\r\n            a.target=\"_blank\";\r\n\r\n            let img = document.createElement(\"img\");\r\n            img.src=partner.imgURL;\r\n\r\n            a.append(img);\r\n            partnersContainer.append(a);\r\n        })\r\n\r\n        partnersContainer.append(seperator.cloneNode(true));\r\n        this.homeslide.children.aboutContainer.append(partnersContainer);\r\n    }\r\n}\r\n","\r\nexport default class Pano_360ty{\r\n\tconstructor(parentContainerID,basepath, suffix){\r\n\tthis.deviceType = function(){\r\n\t\t\tif(window.matchMedia(\"only screen and (max-width: 400px)\").matches == true){\r\n\t\t\t\treturn \"mobile\";\r\n\t\t\t}else if(window.matchMedia(\"only screen and (max-width: 800px)\").matches == true){\r\n\t\t\t\treturn \"tablet\";\r\n\t\t\t}else{\r\n\t\t\t\treturn \"desktop\";\r\n\t\t}\r\n\t};\r\n\tthis.name = function(){\r\n\t\tfor (var name in window)\r\n\t\t  if (window[name] == this)\r\n\t\t\treturn name;\r\n};\r\n\tthis.suffix = suffix !== \"\" ? suffix : (Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 6));\r\n\r\n\tthis.elementIDs = {\r\n\t\tparentContainer : parentContainerID,\r\n\t\tcontainer : \"tourbuilder_360ty_\"+this.suffix,\r\n\t\tpanoContainer : \"pano_container_360ty_\"+this.suffix,\r\n\t\timpressumContainer : \"impressum_360ty_\"+this.suffix,\r\n\t\tbuttonContainer : \"button_container_360ty_\"+this.suffix,\r\n\t\tshareButton : \"shareButton_360ty_\"+this.suffix,\r\n\t\tFBshareButton : \"FBshareButton_360ty_\"+this.suffix,\r\n\t\tURLshareButton : \"URLshareButton_360ty_\"+this.suffix,\r\n\t\tslidesButton : \"slidesButton_360ty_\"+this.suffix,\r\n\t\tclass_shareButtons : \"shareButton_360ty_\"+this.suffix,\r\n\t\tbuttonContainer_value_setter : \"buttonContainer_value_setter_360ty_\"+this.suffix,\r\n\t\ttargetValueSetter_button : \"setTargetValue_360ty_\"+this.suffix,\r\n\t\tclass_valueSetter_button : \"valueSetter_360ty_\"+this.suffix,\r\n\t};\r\n\t\r\n\tthis.elements = {\r\n\t\tparentContainer : null,\r\n\t\tpanoContainer : null,\r\n\t\tcontainer : null,\r\n\t\timpressumContainer : null,\r\n\t\timpressum : null,\r\n\t\tbuttonContainer : null,\r\n\t\tshareButton : null,\r\n\t\tURLshareButton : null,\r\n\t\tFBshareButton : null,\r\n\t\tbuttonContainer_value_setter : null,\r\n\t\ttargetValueSetter_button : null,\r\n\t};\r\n\r\n\tthis.tour_params = {\r\n\t\tbase_Tour : basepath ? basepath : \"\",\r\n\t\tnode : null,\r\n\t\tfov : null,\r\n\t\ttilt : null,\r\n\t\tpan : null,\r\n\t\troll : null,\r\n\t};\r\n\tthis.movement_params = {\r\n\t\tkeyframes : [],\r\n\t\tdelay : 0,\r\n\t\tloop_amount : 1,\r\n\t\tmovementAborted : false\r\n\t}\r\n\tthis.addons_params = {\r\n\t\tsingleImage : null,\r\n\t\tshare_buttons : null,\r\n\t\tshow_impressum : null,\r\n\t};\r\n\tthis.responsive_params = {\r\n\t\t\ttablet : {\r\n\t\t\t\ttour_dimensions : {\r\n\t\t\t\t\twidth: null,\r\n\t\t\t\t\theight: null\r\n\t\t\t\t},\r\n\t\t\t\tsingleImage : null,\r\n\t\t\t\tshare_buttons : null,\r\n\t\t\t\tshow_impressum : null,\r\n\t\t\t\thorizontal_alignment : null,\r\n\t\t\t},\r\n\t\t\tmobile: {\r\n\t\t\t\ttour_dimensions : {\r\n\t\t\t\t\twidth: null,\r\n\t\t\t\t\theight: null\r\n\t\t\t\t},\r\n\t\t\t\tsingleImage : null,\r\n\t\t\t\tshare_buttons : null,\r\n\t\t\t\tshow_impressum : null,\r\n\t\t\t\thorizontal_alignment : null,\r\n\t\t\t}\r\n\t};\r\n\tthis.style_params = {\r\n\t\ttour_dimensions: {\r\n\t\t\twidth: \"100%\",\r\n\t\t\theight: \"16:9\"\r\n\t\t},\r\n\t\thorizontal_alignment : null,\r\n\t};\r\n\t\r\n\tthis.skin_variables = [];\r\n\tthis.hovered_node = null,\r\n    this.externalHotspotListenerSet = false;\r\n\tthis.pano = null;\r\n\tthis.skin = null;\r\n\tthis.controlsListener = {};\r\n\tthis.wooProjectID = \"\";\r\n\tthis.productPanels = [];\r\n\tthis.getWebGLcontexts = function(){\r\n\t\tvar contexts = [];\r\n\t\tvar canvas = this.elements.panoContainer.querySelectorAll(\"canvas\");\r\n\t\t\tfor(let i = 0; i < canvas.length ; i++){\r\n\t\t\t\tcontexts.push(canvas[i].getContext(\"webgl\"));\r\n\t\t\t}\r\n\t\t\treturn contexts;\r\n\t};\r\n\tthis.pano_loaded =  function(){\r\n\t\t\tif(this.pano != null){\r\n\t\t\t\treturn this.pano.isLoaded;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t}\r\ninit () {\r\n\tif(!document.getElementById(this.elementIDs.container)){\r\n\t\tlet viewportMetaSet = false;\r\n\t\tdocument.head.querySelectorAll(\"meta\").forEach(function(meta){\r\n\t\t\tif(meta.name === \"viewport\"){\r\n\t\t\t\tviewportMetaSet = true;\r\n\t\t\t}\r\n\t\t}.bind(this));\r\n\t\tif(viewportMetaSet === false){\r\n\t\t\tthis.addMeta(\"viewport\",\"width=device-width, initial-scale=1\");\r\n\t\t}\r\n\t\tthis.includeStyle();\r\n\t\tvar share_buttons;\r\n\t\tvar show_impressum;\r\n\t\tvar tour_width;\r\n\t\tvar tour_height;\r\n\t\tvar horAlign;\r\n\t\tswitch(this.deviceType()){\r\n\t\t\tcase 'desktop':\r\n\t\t\t\tshare_buttons = this.addons_params.share_buttons;\r\n\t\t\t\tshow_impressum = this.addons_params.show_impressum;\r\n\t\t\t\ttour_width = this.style_params.tour_dimensions.width;\r\n\t\t\t\ttour_height = this.style_params.tour_dimensions.height;\r\n\t\t\t\thorAlign = this.style_params.horizontal_alignment;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'tablet':\r\n\t\t\t\tshare_buttons = this.responsive_params.tablet.share_buttons;\r\n\t\t\t\tshow_impressum = this.responsive_params.tablet.show_impressum;\r\n\t\t\t\ttour_width = this.responsive_params.tablet.tour_dimensions.width;\r\n\t\t\t\ttour_height = this.responsive_params.tablet.tour_dimensions.height;\r\n\t\t\t\thorAlign = this.responsive_params.tablet.horizontal_alignment;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mobile':\r\n\t\t\t\tshare_buttons = this.responsive_params.mobile.share_buttons;\r\n\t\t\t\tshow_impressum = this.responsive_params.mobile.show_impressum;\r\n\t\t\t\ttour_width = this.responsive_params.mobile.tour_dimensions.width;\r\n\t\t\t\ttour_height = this.responsive_params.mobile.tour_dimensions.height;\r\n\t\t\t\thorAlign = this.responsive_params.mobile.horizontal_alignment;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tshare_buttons = this.addons_params.share_buttons;\r\n\t\t\t\tshow_impressum = this.addons_params.show_impressum;\r\n\t\t\t\ttour_width = this.style_params.tour_dimensions.width;\r\n\t\t\t\ttour_height = this.style_params.tour_dimensions.height;\r\n\t\t\t\thorAlign = this.style_params.horizontal_alignment;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tlet init_interval = setInterval(function(){\r\n\t\t\tif(document.getElementById(this.elementIDs.parentContainer)){\r\n\t\t\t\tclearInterval(init_interval);\r\n\t\t\t\tthis.declareElements();\r\n\t\t\t\tthis.setup_pano();\r\n\t\t\t\tif(share_buttons == true){\r\n\t\t\t\t\tthis.setupButtons();\r\n\t\t\t\t}\r\n\t\t\t\tif(show_impressum == true){\r\n\t\t\t\t\tthis.createImpressum();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.setViewerSize(tour_width,tour_height);\r\n\t\t\t\t\r\n\t\t\t\tif(horAlign){\r\n\t\t\t\t\tthis.horizontallyAlignImage(horAlign);\r\n\t\t\t\t}\r\n\t\t\t\tthis.addListeners();\r\n\t\t\t}\r\n\t\t}.bind(this),100);\r\n\t}\r\n}\r\n//user inputs\r\nsetBasePath(url){\r\n\tif(typeof(url) === \"string\"){\r\n\t\tif(!url.endsWith(\"/\")){\r\n\t\t\turl += \"/\"; \r\n\t\t}\r\n\t\tif(url.startsWith(\"http://\")){\r\n\t\t\turl = url.substring(7);\r\n\t\t\turl = \"https://\" + url; \r\n\t\t}\r\n\t\tif(!url.startsWith(\"https://\")){\r\n\t\t\turl = \"https://\" + url; \r\n\t\t}\r\n\t\tthis.tour_params.base_Tour = url;\r\n\t}else{\r\n\t\tconsole.log(\"basepath URL has to be a String in the following Format: 'https://*.360ty.cloud' or 'https://*.360ty.tour.world' \")\r\n\t}\r\n}\r\nsetDimensions(width, height){\r\n\tthis.setWidth(width);\r\n\tthis.setHeight(height);\r\n}\r\nsetWidth(width){\r\n\tthis.style_params.tour_dimensions.width = width;\r\n}\r\nsetHeight(height){\r\n\tthis.style_params.tour_dimensions.height = height;\r\n}\r\n\r\nsetStartNode(nodeNr){\r\n\ttypeof(nodeNr) == \"number\"?\r\n\tthis.tour_params.node = nodeNr\r\n\t: console.log(\"start node value has to be a number\");\r\n}\r\nsetViewingParameter(fov,tilt,pan,roll){\r\n\tthis.setFov(fov);\r\n\tthis.setTilt(tilt);\r\n\tthis.setPan(pan);\r\n\tif(roll){\r\n\t\tthis.setRoll(roll);\r\n\t}\r\n}\r\nsetFov(fov){\r\n\ttypeof(fov) == \"number\"?\r\n\tthis.tour_params.fov = fov\r\n\t: console.log(\"fov value has to be a number\");\r\n}\r\nsetTilt(tilt){\r\n\ttypeof(tilt) == \"number\"?\r\n\tthis.tour_params.tilt = tilt\r\n\t: console.log(\"tilt value has to be a number\");\r\n}\r\nsetPan(pan){\r\n\ttypeof(pan) == \"number\"?\r\n\tthis.tour_params.pan = pan\r\n\t: console.log(\"fov value has to be a number\");\r\n}\r\nsetRoll(roll){\r\n\ttypeof(roll) == \"number\"? this.tour_params.roll = roll\r\n\t: console.log(\"roll value has to be a number\");\r\n}\r\nsetSingleImage(bool){\r\n\ttypeof(bool) == \"boolean\"?\r\n\tthis.addons_params.singleImage = bool\r\n\t: console.log(\"single image value has to be a boolean (true,false)\");\r\n}\r\nsetShareButtonVisibility(bool){\r\n\ttypeof(bool) == \"boolean\"?\r\n\tthis.addons_params.share_buttons = bool\r\n\t: console.log(\"sharebutton value has to be a boolean (true,false)\");\r\n}\r\nsetImpressumVisibility(bool){\r\n\ttypeof(bool) == \"boolean\"?\r\n\tthis.addons_params.show_impressum = bool\r\n\t: console.log(\"impressum value has to be a boolean (true,false)\");\r\n}\r\nsetHorizontalAlignment (value){\r\n\tvalue === \"left\"  || \"center\" || \"right\" ? this.style_params.horizontal_alignment = value\r\n\t: console.log(\"horizontal alignment value has to be either 'left', 'center' or 'right'\")\r\n}\r\n//tablet parameter\r\nsetDimensions_tablet(width, height){\r\n\tthis.setWidth_tablet(width);\r\n\tthis.setHeight_tablet(height);\r\n}\r\nsetWidth_tablet(width){\r\n\tthis.responsive_params.tablet.tour_dimensions.width = width;\r\n}\r\nsetHeight_tablet(height){\r\n\tthis.responsive_params.tablet.tour_dimensions.height = height;\r\n}\r\nsetSingleImage_tablet(bool){\r\n\ttypeof(bool) == \"boolean\"?\r\n\tthis.responsive_params.tablet.singleImage = bool\r\n\t: console.log(\"single image value has to be a boolean (true,false)\");\r\n}\r\nsetShareButtonVisibility_tablet(bool){\r\n\ttypeof(bool) == \"boolean\"?\r\n\tthis.responsive_params.tablet.share_buttons = bool\r\n\t: console.log(\"sharebutton value has to be a boolean (true,false)\");\r\n}\r\nsetImpressumVisibility_tablet(bool){\r\n\ttypeof(bool) == \"boolean\"?\r\n\tthis.responsive_params.tablet.show_impressum = bool\r\n\t: console.log(\"impressum value has to be a boolean (true,false)\");\r\n}\r\nsetHorizontalAlignment_tablet(value){\r\n\tvalue === \"left\"  || \"center\" || \"right\" ? this.responsive_params.tablet.horizontal_alignment = value\r\n\t: console.log(\"horizontal alignment value has to be either 'left', 'center' or 'right'\")\r\n}\r\n//mobile parameter\r\nsetDimensions_mobile(width, height){\r\n\tthis.setWidth_mobile(width);\r\n\tthis.setHeight_mobile(height);\r\n}\r\nsetWidth_mobile(width){\r\n\tthis.responsive_params.mobile.tour_dimensions.width = width;\r\n}\r\nsetHeight_mobile(height){\r\n\tthis.responsive_params.mobile.tour_dimensions.height = height;\r\n}\r\nsetSingleImage_mobile(bool){\r\n\ttypeof(bool) == \"boolean\"?\r\n\tthis.responsive_params.mobile.singleImage = bool\r\n\t: console.log(\"single image value has to be a boolean (true,false)\");\r\n}\r\nsetShareButtonVisibility_mobile(bool){\r\n\ttypeof(bool) == \"boolean\"?\r\n\tthis.responsive_params.mobile.share_buttons = bool\r\n\t: console.log(\"sharebutton value has to be a boolean (true,false)\");\r\n}\r\nsetImpressumVisibility_mobile (bool){\r\n\ttypeof(bool) == \"boolean\"?\r\n\tthis.responsive_params.mobile.show_impressum = bool\r\n\t: console.log(\"impressum value has to be a boolean (true,false)\");\r\n}\r\nsetHorizontalAlignment_mobile(value){\r\n\tvalue === \"left\"  || \"center\" || \"right\" ? this.responsive_params.mobile.horizontal_alignment = value\r\n\t: console.log(\"horizontal alignment value has to be either 'left', 'center' or 'right'\")\r\n}\r\n//\r\nsetSkinVariables (array_vars) {\r\n\ttypeof(array_vars) === \"object\"? (typeof(array_vars[0]) === \"object\"\r\n\t?array_vars.forEach(function(obj_var){\r\n\t\tthis.skin_variables.push(obj_var)\r\n\t}.bind(this))\r\n\t:console.log(\"params in the array have to be objects [{varname: value},...]\"))\r\n\t:console.log(\"skin variable values have to be an array of objects [{varname: value},...]\");\r\n}\r\nsetMovementDelay(delay){\r\n\ttypeof(delay) === \"number\" ? this.movement_params.delay = delay\r\n\t: console.log(\"move delay has to be a number (in ms)\")\r\n}\r\nsetMovementLoopAmount (loop_amount){\r\n\ttypeof(loop_amount) === \"number\" ? this.movement_params.loop_amount = loop_amount\r\n\t: console.log(\"loop amount has to be a number\")\r\n}\r\naddKeyframe (fov,tilt,pan,speed,lock_controls, node){\r\n\tvar keyframeParams = {\r\n\t\tfov : fov,\r\n\t\ttilt : tilt,\r\n\t\tpan : pan,\r\n\t\tspeed : speed,\r\n\t\tlocked_controls : lock_controls,\r\n\t\tnode : node\r\n\t}\r\n\tlet valid = this.checkKeyframeParams(keyframeParams);\r\n\tvalid === true ? this.movement_params.keyframes.push(keyframeParams) : console.log(\"keyframe values not valid. -> (fov:number,tilt:number,pan:number,speed:number,locked_controls:'all'||'none'||'Mousewheel'||'Mouse'||'Keyboard'||'Keyboard+Mousewheel',[optional]node:number)\")\r\n\t\r\n}\r\nreload(){\r\n\tthis.clearwebglContext()\r\n\r\n\tthis.elements.container.parentElement.removeChild(this.elements.container);\r\n\tthis.elements.container = null;\r\n\tthis.elements.panoContainer = null;\r\n\tif(this.elements.shareButton){\r\n\t\tthis.elements.shareButton.parentElement.removeChild(this.elements.shareButton);\r\n\t\tthis.elements.shareButton = null;\r\n\t}\r\n\tif(this.elements.FBshareButton){\r\n\t\tthis.elements.FBshareButton.parentElement.removeChild(this.elements.FBshareButton);\r\n\t\tthis.elements.FBshareButton = null;\r\n\t}\r\n\tif(this.elements.URLshareButton){\r\n\t\tthis.elements.URLshareButton.parentElement.removeChild(this.elements.URLshareButton);\r\n\t\tthis.elements.URLshareButton = null;\r\n\t}\r\n\tif(this.elements.buttonContainer){\r\n\t\tthis.elements.buttonContainer.parentElement.removeChild(this.elements.buttonContainer);\r\n\t\tthis.elements.buttonContainer = null;\r\n\t}\r\n\tif(this.elements.impressumContainer){\r\n\t\tthis.elements.impressumContainer.parentElement.removeChild(this.elements.impressumContainer);\r\n\t\tthis.elements.impressumContainer = null;\r\n\t}\r\n\tthis.init();\r\n}\r\ncheckKeyframeParams(keyframeParams){\r\n\tif(typeof(keyframeParams.fov) === \"number\" && typeof(keyframeParams.tilt) === \"number\" && typeof(keyframeParams.pan) === \"number\" &&\r\n\ttypeof(keyframeParams.speed) === \"number\" && (keyframeParams.locked_controls === 'all'||'none'||'Mousewheel'||'Mouse'||'Keyboard'||'Keyboard+Mousewheel')\r\n\t&& typeof(keyframeParams.node) === \"number\" || \"undefined\"){\r\n\t\treturn true\r\n\t}else{\r\n\t\treturn false\r\n\t}\r\n}\r\n//\r\ncheckIncludedStyle(){\r\n\tvar nodes = document.head.childNodes;\r\n\tvar link_list = [];\r\n\tfor(let i = 0; i < document.head.childElementCount; i++){\r\n\t\tif(nodes[i].nodeName == \"LINK\"){\r\n\t\t\tlink_list.push(nodes[i]);\r\n\t\t}\r\n\t}\r\n\tfor(let i = 0; i < link_list.length;i++){\r\n\t\tif(link_list[i].href.includes(\"360ty_styles.css\")){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nincludeStyle(){\r\n\tif(this.checkIncludedStyle() == false){\r\n\t\tvar style_include = document.createElement(\"link\");\r\n\t\tstyle_include.rel = \"stylesheet\";\r\n\t\tstyle_include.href = \"https://storage.googleapis.com/api.360ty.cloud/360ty_styles.css\";\r\n\t\tdocument.head.appendChild(style_include);\r\n\t}\r\n}\r\n\r\ndeclareElements(){\r\n\tthis.elements.parentContainer = document.getElementById(this.elementIDs.parentContainer);\r\n\r\n\tif(this.responsive_params.tablet.tour_dimensions.width === null){\r\n\t\tthis.responsive_params.tablet.tour_dimensions.width = this.style_params.tour_dimensions.width\r\n\t}\r\n\tif(this.responsive_params.tablet.tour_dimensions.height === null){\r\n\t\tthis.responsive_params.tablet.tour_dimensions.height = this.style_params.tour_dimensions.height\r\n\t}\r\n\tif(this.responsive_params.tablet.singleImage === null){\r\n\t\tthis.responsive_params.tablet.singleImage = this.addons_params.singleImage\r\n\t}\r\n\tif(this.responsive_params.tablet.share_buttons === null){\r\n\t\tthis.responsive_params.tablet.share_buttons = this.addons_params.share_buttons\r\n\t}\r\n\tif(this.responsive_params.tablet.share_buttons === null){\r\n\t\tthis.responsive_params.tablet.show_impressum = this.addons_params.show_impressum\r\n\t}\r\n\tif(this.responsive_params.tablet.share_buttons === null){\r\n\t\tthis.responsive_params.tablet.horizontal_alignment = this.addons_params.horizontal_alignment\r\n\t}\r\n\t\r\n\tif(this.responsive_params.mobile.tour_dimensions.width === null){\r\n\t\tthis.responsive_params.mobile.tour_dimensions.width = this.style_params.tour_dimensions.width\r\n\t}\r\n\tif(this.responsive_params.mobile.tour_dimensions.height === null){\r\n\t\tthis.responsive_params.mobile.tour_dimensions.height = this.style_params.tour_dimensions.height\r\n\t}\r\n\tif(this.responsive_params.mobile.singleImage === null){\r\n\t\tthis.responsive_params.mobile.singleImage = this.addons_params.singleImage\r\n\t}\r\n\tif(this.responsive_params.mobile.share_buttons === null){\r\n\t\tthis.responsive_params.mobile.share_buttons = this.addons_params.share_buttons\r\n\t}\r\n\tif(this.responsive_params.mobile.share_buttons === null){\r\n\t\tthis.responsive_params.mobile.show_impressum = this.addons_params.show_impressum\r\n\t}\r\n\tif(this.responsive_params.mobile.share_buttons === null){\r\n\t\tthis.responsive_params.mobile.horizontal_alignment = this.addons_params.horizontal_alignment\r\n\t}\r\n}\r\n\r\naddMeta(metaName, metaContent){\r\n\tvar meta = document.createElement(\"meta\");\r\n\tmeta.name = metaName;\r\n\tmeta.content = metaContent;\r\n\tdocument.head.appendChild(meta);\r\n}\r\n//setup_pano\r\n\r\nsetup_pano(){\r\n\tif(!this.elements.panoContainer){\r\n\t\tthis.createContainer();\r\n\t}\r\n\tthis.pano=new pano2vrPlayer(this.elementIDs.panoContainer);\r\n\tif(this.tour_params.node){\r\n\t\tthis.pano.startNode = \"node\"+this.tour_params.node;\r\n\t}\r\n\t\r\n\tthis.skin=new pano2vrSkin(this.pano,this.tour_params.base_Tour);\r\n\tvar singleImage;\r\n\tswitch(this.deviceType()){\r\n\t\tcase 'desktop':\r\n\t\t\tsingleImage = this.addons_params.singleImage;\r\n\t\t\tbreak;\r\n\t\tcase 'tablet':\r\n\t\t\tsingleImage = this.responsive_params.tablet.singleImage;\r\n\t\t\tbreak;\r\n\t\tcase 'mobile':\r\n\t\t\tsingleImage = this.responsive_params.mobile.singleImage;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tsingleImage = this.addons_params.singleImage;\r\n\t}\r\n\tthis.pano.readConfigUrlAsync(this.tour_params.base_Tour +\"pano.xml\", function(){\r\n        if(singleImage === true){\r\n\t\t\tthis.pano.removeHotspots();\r\n\t\t\tthis.pano.stopAutorotate();\r\n\t\t}\r\n\t\tif(this.skin_variables){\r\n\t\t\tthis.changeSkinVars();\r\n\t\t}\r\n\t\tthis.pano_UpdateViewingParams();\r\n\t\r\n}.bind(this))\r\nthis.callAfterPanoLoaded(\"loadKeyframes\");\r\nthis.callAfterPanoLoaded(\"addHotspotListeners\");\r\nthis.callAfterPanoLoaded(\"init_woo_panels\");\r\n}\r\npano_UpdateViewingParams(){\r\n\tif(this.tour_params.fov || this.tour_params.fov === 0){\r\n\t\tthis.pano.setFov(this.tour_params.fov);\r\n\t}\r\n\tif(this.tour_params.tilt || this.tour_params.tilt === 0){\r\n\t\tthis.pano.setTilt(this.tour_params.tilt)\r\n\t}\r\n\tif(this.tour_params.pan || this.tour_params.pan === 0){\r\n\t\tthis.pano.setPan(this.tour_params.pan)\r\n\t}\r\n}\r\nasync loadKeyframes (){\r\n\tsetTimeout(async function(){\r\n\t\t\tif(this.movement_params.keyframes !== []){\r\n\t\t\t\tthis.elements.panoContainer.addEventListener(\"mousedown\",function(){\r\n\t\t\t\r\n\t\t\t\t\t\tthis.movement_params.movementAborted = true\r\n\t\t\t\t\t\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\tthis.elements.panoContainer.addEventListener(\"touchstart\",function(){\r\n\t\t\t\t\tthis.movement_params.movementAborted = true\r\n\t\t\t\t}.bind(this))\r\n\t\t\t\tfor(let i = 0; i< this.movement_params.loop_amount;i++){\r\n\t\t\t\t\tif(this.movement_params.movementAborted === false){\r\n\t\t\t\t\t\tawait this.moveToKeyframes();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t}.bind(this),this.movement_params.delay);\r\n}\r\nmoveToStartNode(){\r\n\treturn new Promise(function(resolve, reject){\r\n\t\tif(this.tour_params.node){\r\n\t\t\tthis.elements.panoContainer.addEventListener(\"mousedown\",function(){\r\n\t\t\t\r\n\t\t\t\treject(\"movement aborted by user\")\r\n\t\t\t\r\n\t\t}.bind(this));\r\n\t\tthis.elements.panoContainer.addEventListener(\"touchstart\",function(){\r\n\t\t\treject(\"movement aborted by user\")\r\n\t\t}.bind(this))\r\n\t\t\tif(parseInt(this.pano.getCurrentNode().substring(4)) !== this.tour_params.node){\r\n\t\t\t\tthis.pano.openNext(\"{node\"+this.tour_params.node+\"}\")\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t}else{\r\n\t\t\treject(\"start node not set\");\r\n\t\t}\r\n\t}.bind(this))\r\n}\r\nasync moveToKeyframes(){\r\n\t\ttry{\r\n\t\t\tconst promises = this.movement_params.keyframes.map(async function(keyframe){\r\n\t\t\tconst frame = await this.moveToKeyframe(keyframe);\r\n\t\t\treturn frame;\r\n\t\t}.bind(this))\r\n\t\tconst frames = await Promise.all(promises)\r\n\t\treturn frames;\r\n\t\r\n\t}catch(err){\r\n\t\tconsole.log(err)\r\n\t}\r\n}\r\nmoveToKeyframe (keyframe){\r\n\treturn new Promise(async function(resolve,reject){\r\n\t\ttry{\r\n\t\t\tif(this.movement_params.movementAborted === false){\r\n\t\t\t\tawait this.checkActiveMovement();\r\n\t\t\t\tthis.setLock(keyframe.locked_controls)\r\n\t\t\t\tif(this.movement_params.keyframes[0] == keyframe){\r\n\t\t\t\t\tawait this.moveToStartNode()\r\n\t\t\t\t}\r\n\t\t\t\tif(keyframe.node && \"node\"+keyframe.node !== this.pano.getCurrentNode()){\r\n\t\t\t\t\tawait this.pano.openNext(\"{node\"+keyframe.node+\"}\")\r\n\t\t\t\t}\r\n\t\t\t\tawait this.pano.moveTo(keyframe.pan, keyframe.tilt, keyframe.fov,keyframe.speed,0,1);\r\n\t\t\t\tthis.removeLockAfterMovement(keyframe.locked_controls);\r\n\t\t\t\tif(keyframe.node && !this.pano.getNodeIds().includes(\"node\"+keyframe.node)){\r\n\t\t\t\t\treject(\"movement aborted\")\r\n\t\t\t\t\tconsole.log(\"Aborted Movement! There is no node\"+keyframe.node+\" in this tour.\")\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresolve()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}catch(err){console.log(err)}\r\n\t}.bind(this))\r\n}\r\ncheckActiveMovement(){\r\n\treturn new Promise(async function(resolve,reject){\r\n\t\tvar activeMov = setInterval(function(){\r\n\t\t\tif(this.movement_params.movementAborted === true){\r\n\t\t\t\treject(\"movement aborted by user\")\r\n\t\t\t}\r\n\t\t\tif(this.pano.F.active === false){\r\n\t\t\t\tclearInterval(activeMov)\r\n\t\t\t\tresolve()\r\n\t\t\t}\r\n\t\t}.bind(this),100)\r\n\t}.bind(this));\r\n}\r\n\r\nchangeSkinVars(){\r\n\tif(typeof(this.skin_variables) === \"object\"){\r\n\t\tthis.skin_variables.forEach(function(variable){\r\n\t\t\tfor(const[key,value] of Object.entries(variable)){\r\n\t\t\t\tif(value !== null || value !== \"\"){\r\n\t\t\t\t\tthis.pano.setVariableValue(key,value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(this));\r\n\t} \r\n}\r\nremoveLockAfterMovement(type){\r\n\tif(type != \"none\"){\r\n\tswitch (type){\r\n\t\tcase \"all\":\r\n\t\t\tvar lock_controls_interval = setInterval(function(){\r\n\t\t\t\t\tif(this.pano.F.active == false){\r\n\t\t\t\t\t\tclearInterval(lock_controls_interval);\r\n\t\t\t\t\t\tthis.pano.setLocked(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),100);\r\n\t\t\tbreak;\r\n\t\tcase \"Mousewheel\":\r\n\t\t\tvar lock_controls_interval = setInterval(function(){\r\n\t\t\t\t\tif(this.pano.F.active == false){\r\n\t\t\t\t\t\tclearInterval(lock_controls_interval);\r\n\t\t\t\t\t\tthis.pano.setLockedWheel(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),100);\r\n\t\t\tbreak;\r\n\t\tcase \"Mouse\":\r\n\t\t\tvar lock_controls_interval = setInterval(function(){\r\n\t\t\t\t\tif(this.pano.F.active == false){\r\n\t\t\t\t\t\tclearInterval(lock_controls_interval);\r\n\t\t\t\t\t\tthis.pano.setLockedMouse(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),100);\r\n\t\t\tbreak;\r\n\t\tcase \"Keyboard\":\r\n\t\t\tvar lock_controls_interval = setInterval(function(){\r\n\t\t\t\t\tif(this.pano.F.active == false){\r\n\t\t\t\t\t\tclearInterval(lock_controls_interval);\r\n\t\t\t\t\t\tthis.pano.setLockedKeyboard(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),100);\r\n\t\t\tbreak;\r\n\t\tcase \"Keyboard_Mousewheel\":\r\n\t\t\tvar lock_controls_interval = setInterval(function(){\r\n\t\t\t\t\tif(this.pano.F.active == false){\r\n\t\t\t\t\t\tclearInterval(lock_controls_interval);\r\n\t\t\t\t\t\tthis.pano.setLockedKeyboard(false);\r\n\t\t\t\t\t\tthis.pano.setLockedWheel(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),100);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tconsole.log(\"couldnt find lock-parameter \"+type);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\nsetLock(type){\r\n\tif(type != \"none\"){\r\n\tswitch (type){\r\n\t\tcase \"all\":\r\n\t\t\tthis.pano.setLocked(true);\r\n\t\t\tbreak;\r\n\t\tcase \"Mousewheel\":\r\n\t\t\tthis.pano.setLockedWheel(true);\r\n\t\t\tbreak;\r\n\t\tcase \"Mouse\":\r\n\t\t\tthis.pano.setLockedMouse(true);\r\n\t\t\tbreak;\r\n\t\tcase \"Keyboard\":\r\n\t\t\tthis.pano.setLockedKeyboard(true);\r\n\t\t\tbreak;\r\n\t\tcase \"Keyboard_Mousewheel\":\r\n\t\t\tthis.pano.setLockedKeyboard(true);\r\n\t\t\tthis.pano.setLockedWheel(true);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tconsole.log(\"couldnt find lock-parameter \"+type);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\ncreateContainer(){\r\n \tvar parentContainer = this.elements.parentContainer;\r\n\tvar container = document.createElement(\"div\");\r\n\tvar pano_container = document.createElement(\"div\");\r\n\tpano_container.setAttribute(\"id\",this.elementIDs.panoContainer);\r\n\tcontainer.style.width = this.elements.parentContainer.getBoundingClientRect().width + \"px\";\r\n\tcontainer.style.height = this.elements.parentContainer.getBoundingClientRect().height + \"px\";\r\n\tpano_container.style.width = container.getBoundingClientRect().width + \"px\";\r\n\tpano_container.style.height = container.getBoundingClientRect().height + \"px\";\r\n    container.setAttribute(\"id\",this.elementIDs.container);\r\n\tparentContainer.appendChild(container);\r\n\tcontainer.appendChild(pano_container);\r\n\r\n\tthis.elements.panoContainer = pano_container;\r\n\tthis.elements.container = container;\r\n}\r\n\r\ncreateImpressum(){\r\n\tvar parent = this.elements.container;\r\n\tvar impressumContainer = document.createElement(\"div\");\r\n\timpressumContainer.setAttribute(\"id\",this.elementIDs.impressumContainer);\r\n\tvar p = document.createElement(\"p\");\r\n \tvar impressum = document.createElement(\"a\");\r\n    impressum.setAttribute(\"href\",\"https://360ty.world/\");\r\n \timpressum.setAttribute(\"target\",\"_blank\");\r\n\timpressum.innerHTML = \"360ty.world | Made with  in Europe\";\r\n \tparent.appendChild(impressumContainer);\r\n\timpressumContainer.appendChild(p);\r\n\tp.appendChild(impressum);\r\n\tthis.elements.impressum = impressum;\r\n\tthis.elements.impressumContainer = impressumContainer;\r\n}\r\n\r\ncheckParameter(){\r\n\tvar exceptions = [\"singleImage\",\"customClass\"];\r\n\tvar check = true;\r\nfor (var prop in this.tour_params){\r\n\tif(exceptions.includes(prop) == false){\r\n\t\tif(prop == null){\r\n\t\t\tconsole.error(\"360ty Pano - emtpy or wrong parameter\" , \"parameter \"+prop+\" empty or wrong! Please fill it out correctly and try again.\");\r\n\t\t\tcheck = false;\r\n\t\t}\r\n\t}\r\n}\r\n if(check == true){\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n\r\n\r\naddHotspotListeners(){\r\n\tvar hotspots = this.elements.panoContainer.querySelectorAll(\".ggskin .ggskin_external\");\r\n\tfor(let i = 0; i<hotspots.length;i++){\r\n\thotspots[i].addEventListener(\"mouseover\",function(){\r\n\tvar timesCalled = 0;\r\n\tvar hn_interval = setInterval(function(){\r\n\t\tif(timesCalled < 25){\r\n\t\tif(this.pano && this.pano.hotspot){\r\n\t\t\tvar hotspot = this.pano.hotspot;\r\n\t\t}\r\n\t\tif(hotspot.url != \"\"){\r\n\t\t\tthis.hovered_node = hotspot;\r\n\t\t\tclearInterval(hn_interval);\r\n\t\t}else{\r\n\t\t\ttimesCalled++\r\n\t\t}\r\n\t\t}else{\r\n\t\t\tclearInterval(hn_interval);\r\n\t\t}\r\n\t}.bind(this),10);\r\n\t}.bind(this));\r\n\thotspots[i].addEventListener(\"touchstart\",function(){\r\n\t\tvar timesCalled = 0;\r\n\t\tvar hn_interval = setInterval(function(){\r\n\t\t\tif(timesCalled < 25){\r\n\t\t\tif(this.pano && this.pano.hotspot){\r\n\t\t\t\tvar hotspot = this.pano.hotspot;\r\n\t\t\t}\r\n\t\t\tif(hotspot.url != \"\"){\r\n\t\t\t\tthis.hovered_node = hotspot;\r\n\t\t\t\tclearInterval(hn_interval);\r\n\t\t\t}else{\r\n\t\t\t\ttimesCalled++\r\n\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tclearInterval(hn_interval);\r\n\t\t\t}\r\n\t\t}.bind(this),10);\r\n\t\t}.bind(this));\r\n\thotspots[i].addEventListener(\"mouseup\",function(){\r\n\t\tif(this.hovered_node.url.includes(\"http\")){\r\n\t\tvar hotspotURL = this.hovered_node.url;\r\n\t\tvar basePathStartIndex = hotspotURL.indexOf(\"//\")+2;\r\n\t\tvar basePathEndIndex = hotspotURL.indexOf(\"/\",basePathStartIndex);\r\n\t\tvar basepath = hotspotURL.substring(0,basePathEndIndex+1);\r\n\t\tvar nodeIndex = hotspotURL.indexOf(\"#\",basePathEndIndex)+5;\r\n\t\tvar nodeID = hotspotURL.substring(nodeIndex,hotspotURL.length);\r\n\t\tthis.tour_params.base_Tour = basepath;\r\n\t\tthis.tour_params.node = nodeID;\r\n\t\tthis.keyframes = [];\r\n        this.reload();\r\n        this.externalHotspotListenerSet = false;\r\n\t}\r\n\t}.bind(this));\r\n\thotspots[i].addEventListener(\"touchend\",function(e){\r\n\t\tif(this.hovered_node.url.includes(\"http\")){\r\n\t\tvar hotspotURL = this.hovered_node.url;\r\n\t\tvar basePathStartIndex = hotspotURL.indexOf(\"//\")+2;\r\n\t\tvar basePathEndIndex = hotspotURL.indexOf(\"/\",basePathStartIndex);\r\n\t\tvar basepath = hotspotURL.substring(0,basePathEndIndex+1);\r\n\t\tvar nodeIndex = hotspotURL.indexOf(\"#\",basePathEndIndex)+5;\r\n\t\tvar nodeID = hotspotURL.substring(nodeIndex,hotspotURL.length);\r\n\t\tthis.tour_params.base_Tour = basepath;\r\n\t\tthis.tour_params.node = nodeID;\r\n\t\tthis.keyframes = [];\r\n        this.setup_pano();\r\n        this.externalHotspotListenerSet = false;\r\n\t}\r\n\t}.bind(this));\r\n\t}\r\n\t\r\n    if(this.externalHotspotListenerSet == false){\r\n        this.externalHotspotListenerSet = true;\r\n        this.pano.addListener(\"changenode\",function(){\r\n\t\t\tthis.addHotspotListeners();\r\n        }.bind(this));\r\n    }\r\n}\r\n\r\n\r\n//buttons\r\nsetupButtons(){\r\n\tif(this.elements.shareButton == null){\r\n\tif(this.pano && this.pano.isLoaded == true){\r\n\t\tthis.createShareButtons();\r\n\t}else{\r\n\t\tvar shareButtonsInterval = setInterval(function(){\r\n\t\t\tif(this.pano && this.pano.isLoaded == true){\r\n\t\t\t\tthis.createShareButtons();\r\n\t\t\t\tclearInterval(shareButtonsInterval);\r\n\t\t\t\t}\r\n\t\t}.bind(this),100);\r\n\t}\r\n\t}\r\n}\r\n\r\ncallAfterPanoLoaded(callbackName){\r\n\tvar called = false;\r\n\tif(this.pano_loaded() == true){\r\n\t\tthis[callbackName]();\r\n\t}else{\r\n\t\tvar panoLoaded_interval = setInterval(function(){\r\n\t\t\tif(this.pano_loaded() == true){\r\n\t\t\t\t\tclearInterval(panoLoaded_interval);\r\n\t\t\t\t\tif(called == false){\r\n\t\t\t\t\t\tthis[callbackName]();\r\n\t\t\t\t\t\tcalled = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}.bind(this),100);\r\n\t}\r\n}\r\n\r\ncreateButton(onclickEvent, id, text, style_display){\r\n\tif(this.elements.buttonContainer !== null){\r\n\t\tvar buttonContainer = this.elements.buttonContainer;\r\n\t}else{\r\n\t\tvar buttonContainer = document.createElement(\"div\");\r\n\t\tbuttonContainer.setAttribute(\"id\",this.elementIDs.buttonContainer);\r\n\t\tthis.elements.container.appendChild(buttonContainer);\r\n\t\tthis.elements.buttonContainer = buttonContainer;\r\n\t}\r\n\tvar button = document.createElement(\"button\");\r\n    button.setAttribute(\"id\",this.elementIDs[id]);\r\n    button.setAttribute(\"class\",this.elementIDs.class_shareButtons);\r\n    if(style_display){\r\n    \tbutton.setAttribute(\"style\",\"display: \"+ style_display +\";\");\r\n\t}\r\n\tbutton.addEventListener(\"click\",function(){\r\n\t\tthis[onclickEvent]();\r\n\t}.bind(this))\r\n    button.innerHTML = text;\r\n\tbuttonContainer.appendChild(button);\r\n\tthis.elements[id] = button;\r\n}\r\n\r\ncreateShareButtons(){\r\n    this.createButton(\"showShareButtons\",\"shareButton\",\"share\");\r\n    this.createButton(\"shareOnFacebook\",\"FBshareButton\", \"share on facebook\",\"none\");\r\n \tthis.createButton(\"copyShareUrlToClipboard\",\"URLshareButton\", \"get link to location\",\"none\");\r\n}\r\n\r\ncopyShareUrlToClipboard (){\r\n\tthis.copyToClipboard(this.getShareURL(),'link')\r\n}\r\n\r\nshowShareButtons(){\r\n\tthis.elements.shareButton.style.display = \"none\";\r\n\tthis.elements.URLshareButton.style.display = \"\";\r\n\tthis.elements.FBshareButton.style.display = \"\";\r\n}\r\n\r\nshareOnFacebook(){\r\n    var facebookURL =  \"https://www.facebook.com/sharer/sharer.php?kid_directed_site=0&u=\" + encodeURIComponent(this.getShareURL());\r\n    var leftPosition = window.visualViewport?(window.visualViewport.width / 2) : (window.screen.availWidth / 2);\r\n    var topPosition = window.visualViewport?(window.visualViewport.height / 2) : (window.screen.availWidth / 2);\r\n    var popUpSettings = 'height=700,width=500, screenX =' + leftPosition + ',screenY =' + topPosition + ',resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes';\r\n    var win = window.open(facebookURL,'popUpWindow',popUpSettings);\r\n    win.focus();\r\n}\r\n\r\ncopyToClipboard(text,alertText){ \r\n    var aux = document.createElement(\"input\");\r\n    aux.setAttribute(\"value\", text);\r\n    document.body.appendChild(aux);\r\n    aux.select();\r\n    document.execCommand(\"copy\");\r\n    document.body.removeChild(aux);\r\n    alert(alertText + ' copied to clipboard!');\r\n}\r\n\r\ngetShareURL(){\r\n        var shareUrl = this.pano.getBasePath() +\"?Pano=\" + this.pano.getCurrentNode() + \"&PanoFovTarget=\" + this.pano.getFov() + \"&PanoPanTarget=\" + this.pano.getPan() + \"&PanoTiltTarget=\" + this.pano.getTilt() + \"&PanoFovStart=\" + (this.pano.getFov() + 20) + \"&PanoPanStart=\" + (this.pano.getPan() +50) + \"&PanoTiltStart=\" + this.pano.getTilt();\r\n      return shareUrl;\r\n}\r\naddListeners() {\r\n\t\t\tthis.windowResizeListener();\r\n\t\t\tthis.clearwebglContext_listener();\r\n\t\t}\r\nwindowResizeListener(){\r\n\tif(window.visualViewport){\r\n\t\twindow.visualViewport.addEventListener(\"resize\", function(){\r\n\t\t\tlet height;\r\n\t\t\tlet width;\r\n\t\t\tswitch(this.deviceType()){\r\n\t\t\t\tcase \"desktop\":\r\n\t\t\t\t\twidth = this.style_params.tour_dimensions.width;\r\n\t\t\t\t\theight = this.style_params.tour_dimensions.height;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"tablet\":\r\n\t\t\t\t\twidth = this.responsive_params.tablet.tour_dimensions.width;\r\n\t\t\t\t\theight = this.responsive_params.tablet.tour_dimensions.height;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"mobile\":\r\n\t\t\t\t\twidth = this.responsive_params.mobile.tour_dimensions.width;\r\n\t\t\t\t\theight = this.responsive_params.mobile.tour_dimensions.height;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.setViewerSize(width,height);\r\n\t\t}.bind(this));\r\n\t}else{\r\n\t\twindow.addEventListener(\"resize\", function(){\r\n\t\t\tlet height;\r\n\t\t\tlet width;\r\n\t\t\tswitch(this.deviceType()){\r\n\t\t\t\tcase \"desktop\":\r\n\t\t\t\t\twidth = this.style_params.tour_dimensions.width;\r\n\t\t\t\t\theight = this.style_params.tour_dimensions.height;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"tablet\":\r\n\t\t\t\t\twidth = this.responsive_params.tablet.tour_dimensions.width;\r\n\t\t\t\t\theight = this.responsive_params.tablet.tour_dimensions.height;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"mobile\":\r\n\t\t\t\t\twidth = this.responsive_params.mobile.tour_dimensions.width;\r\n\t\t\t\t\theight = this.responsive_params.mobile.tour_dimensions.height;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.setViewerSize(width,height);\r\n\t\t}.bind(this));\r\n\t}\r\n\t\r\n}\r\nsetViewerSize(width, height){\r\n\t\twidth =  isNaN(width) == false ? width + \"px\" : width;\r\n\t\tthis.elements.container.style.width = width;\r\n\r\n\t\theight = isNaN(height) === false ? height + \"px\" : (height.includes(\":\") ? this.calculateAspectRatio(height) + \"px\" : (height.endsWith(\"%%\") ? this.calcHeight_Precentage(height) + \"px\" : height));\r\n\t\tthis.elements.container.style.height = height;\r\n\t\t\r\n\t\tvar containerSize = this.elements.container.getBoundingClientRect();\r\n\t\tthis.elements.panoContainer.style.width = containerSize.width + \"px\";\r\n\t\tthis.elements.panoContainer.style.height = containerSize.height + \"px\";\r\n\t\tthis.pano.setViewerSize(containerSize.width,containerSize.height);\r\n\t}\r\ncalculateAspectRatio(ratio){\r\n\tvar colonIndex = ratio.indexOf(\":\");\r\n\tvar x_aspect = parseFloat(ratio.substring(0,colonIndex));\r\n\tvar y_aspect = parseFloat(ratio.substring(colonIndex+1));\r\n\tvar height = this.elements.container.getBoundingClientRect().width/(x_aspect/y_aspect);\r\n\treturn height;\r\n}\r\ncalcHeight_Precentage(height){\r\n\tvar width = this.elements.container.getBoundingClientRect().width;\r\n\tvar perc_height = parseFloat(height.substring(-1))/100;\r\n\tvar calc_height = width * perc_height;\r\n\treturn calc_height;\r\n}\r\nhorizontallyAlignImage(alignment){\r\n\tvar container_style = this.elements.container.style;\r\n\tswitch(alignment){\r\n\t\tcase \"center\":\r\n\t\t\tcontainer_style.marginRight = \"auto\";\r\n\t\t\tcontainer_style.marginLeft = \"auto\";\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"left\":\r\n\t\t\tcontainer_style.marginRight = \"auto\";\r\n\t\t\tcontainer_style.marginLeft = \"\";\r\n\r\n\t\t\tbreak;\r\n\t\tcase \"right\":\r\n\t\t\tcontainer_style.marginRight = \"\";\r\n\t\t\tcontainer_style.marginLeft = \"auto\";\r\n\t}\r\n}\t\r\n\r\nclearwebglContext_listener(){\r\n\tdocument.addEventListener(\"close\", function(){\r\n\t\tthis.clearwebglContext()\r\n\t}.bind(this));\r\n}\r\nclearwebglContext(){\r\n\tvar canvas = this.elements.panoContainer.getElementsByTagName(\"canvas\");\r\n\tfor( let i = 0; i< canvas.length;i++){\r\n\t\tcanvas[i].getContext('webgl').getExtension('WEBGL_lose_context').loseContext();\r\n\t}\r\n\tconsole.log(\"panorama wegl context cleared\");\r\n}\r\n/*\r\nWooCommerce Integration\r\n*/\r\n\r\nsetProjectID(id){\r\n\tthis.wooProjectID = id;\r\n} \r\ninit_woo_panels(){\r\n\tif(this.wooProjectID){\r\n\t\tthis.addWooCommerceProductPanels(this.wooProjectID).then(()=>{\r\n\t\t\tthis.addProductPanelsVisibilityListener();\r\n\t\t\tthis.addProductNodeListener();\r\n\t\t}).catch(function(err){\r\n\t\t\tconsole.error(err)\r\n\t\t});\r\n\t}\r\n}\r\nasync addWooCommerceProductPanels(projectID){\r\n\treturn new Promise(async function(resolve,reject){\r\n\t\ttry{\r\n\t\t\tlet panels = await this.getProductPanels(projectID);\r\n\t\t\tif(!panels.error){\r\n\t\t\t\tthis.productPanels = panels;\r\n\t\t\t\tthis.renderHotspots(panels);\r\n\t\t\t\tresolve(panels);\r\n\t\t\t}else{\r\n\t\t\t\treject(panels.error)\r\n\t\t\t}\r\n\t\t}catch(err){\r\n\t\t\treject(err)\r\n\t\t}\r\n\t}.bind(this))\r\n\r\n}\r\ncreateHotspotDot(){\r\n\tlet container = document.createElement(\"div\");\r\n\tlet hs_dot = document.createElement(\"div\");\r\n\ths_dot.classList.add(\"hotspot_dot\");\r\n\r\n\tlet hs_pulse = document.createElement(\"div\");\r\n\ths_pulse.classList.add(\"hotspot_pulse\");\r\n\r\n\tcontainer.append(hs_dot);\r\n\tcontainer.append(hs_pulse);\r\n\treturn container\r\n}\r\nsetHotspotDotsListener(){\r\n\tsetTimeout(function(){\r\n\t\tsetInterval(function(){\r\n\t\t\tthis.pano.$.querySelectorAll(\".hotspot_pulse\").forEach(function(hs_pulse){\r\n\t\t\t\tif(hs_pulse.style.opacity == 0){\r\n\t\t\t\t\ths_pulse.style.opacity = 0.65;\r\n\t\t\t\t}else{\r\n\t\t\t\t\ths_pulse.style.opacity = 0\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}.bind(this),2000)\r\n\t}.bind(this),5000)\r\n}\r\ncreatePanel(imgSrc,headline,description,price){\r\n    let container = document.createElement(\"div\");\r\n    container.classList.add(\"product_container\");\r\n\r\n    if(imgSrc){\r\n        let leftColumn = document.createElement(\"div\");\r\n        leftColumn.classList.add(\"left-column\");\r\n        let img = document.createElement(\"img\");\r\n        img.src= imgSrc;\r\n        leftColumn.append(img);\r\n        container.append(leftColumn)\r\n    }\r\n\r\n    let rightColumn = document.createElement(\"div\");\r\n    rightColumn.classList.add(\"right-column\");\r\n    \r\n    let productDescriptionContainer = document.createElement(\"div\");\r\n    productDescriptionContainer.classList.add(\"product-description\");\r\n\r\n    if(headline){\r\n        let header = document.createElement(\"h1\");\r\n        header.innerText = headline;\r\n        productDescriptionContainer.append(header);\r\n    }\r\n\r\n    if(description){\r\n        let description_p = document.createElement(\"p\");\r\n        description_p.innerHTML = description;\r\n        productDescriptionContainer.append(description_p)\r\n    }\r\n\r\n    rightColumn.append(productDescriptionContainer)\r\n\r\n    if(price){\r\n       let priceContainer = document.createElement(\"div\");\r\n       priceContainer.classList.add(\"product-price\");\r\n       \r\n       let priceSpan = document.createElement(\"span\");\r\n       priceSpan.innerText = price;\r\n\r\n       priceContainer.append(priceSpan);\r\n        rightColumn.append(priceContainer)\r\n    }\r\n    container.append(rightColumn)\r\n    return container;\r\n}\r\n\r\ncreateProductHotspot(imgSrc,headline,description,price){\r\n\tlet hsDiv = document.createElement(\"div\");\r\n\tlet product_panel = document.createElement(\"div\");\r\n\tproduct_panel.classList.add(\"product_panel\");\r\n\tlet panel = this.createPanel(imgSrc,headline,description,price);\r\n\tlet hsDot = this.createHotspotDot();\r\n\r\n\thsDiv.addEventListener(\"mouseover\",function(){\r\n\t\tproduct_panel.style.pointerEvents = \"auto\";\r\n\t\tproduct_panel.style.opacity = 1;\r\n\t}.bind(this))\r\n\thsDiv.addEventListener(\"mouseleave\",function(){\r\n\t\tproduct_panel.style.opacity = 0;\r\n\t\tsetTimeout(function(){product_panel.style.pointerEvents=\"none\"},500)\r\n\t}.bind(this))\r\n\r\n\tproduct_panel.append(panel);\r\n\thsDiv.append(hsDot);\r\n\thsDiv.append(product_panel);\r\n\treturn hsDiv;\r\n}\r\n\r\nrenderHotspots(panels){\r\n    panels.forEach(function(panel,i){\r\n\t\tif(this.pano.getCurrentNode() === \"node\"+panel.position.node){\r\n\t\t\tlet hs_div = this.createProductHotspot(panel.product.images[0].src,panel.product.name,panel.product.description,panel.product.price)\r\n\t\t\ths_div.style.visibility = \"\";\r\n\t\t\tthis.pano.addHotspot(\"product_panel_\"+i,panel.position.pan,panel.position.tilt,hs_div);\r\n\t\t}\r\n    }.bind(this))\r\n}\r\ngetProductPanels = async(projectID) =>{\r\n\treturn new Promise(async function(resolve, reject){\r\n\t\ttry{\r\n\t\t\tlet products = await fetch(`https://europe-west1-woo-products-360ty.cloudfunctions.net/getProducts?project=${projectID}`);\r\n\t\t\t\tresolve(products.json())\r\n\t\t}catch(err){\r\n\t\t\treject(err);\r\n\t\t}\r\n\t}.bind(this))\r\n   \r\n}\r\naddProductNodeListener(){\r\n\tthis.pano.addListener(\"changenode\",function(){\r\n\t\tthis.renderHotspots(this.productPanels);\r\n\t}.bind(this));\r\n}\r\naddProductPanelsVisibilityListener(){\r\n    this.pano.addListener(\"positionchanged\",function(){\r\n        this.productPanels.forEach(function(panel,i){\r\n                if(this.pano.getHotspot(\"product_panel_\"+i)){\r\n                    let hs = this.pano.getHotspot(\"product_panel_\"+i);\r\n                    let currentPan = this.pano.getPan();\r\n                    if(currentPan < 0){\r\n                        currentPan = currentPan + 360;\r\n                    }\r\n                    if(hs.pan < 0){\r\n                        hs.pan = hs.pan + 360;\r\n                    }\r\n                    let pan_diff = parseInt(currentPan-hs.pan);\r\n                    if(pan_diff < 0){\r\n                        pan_diff = pan_diff*-1\r\n                    }\r\n                    if(pan_diff <= 75 || pan_diff - 360 >= -75){\r\n                        if(hs.div.style.visibility === \"hidden\"){\r\n                            hs.div.style.visibility = \"\";\r\n                        }\r\n                    }\r\n                }\r\n        }.bind(this))\r\n    }.bind(this))\r\n}\r\n}\r\n","import Slides3 from \"./class-slides3-360ty\";\r\nimport Pano_360ty from \"./class-tourbuilder-360ty\";\r\nimport './css/slides3.scss';\r\n\r\nlet interval = setInterval(()=>{\r\n    if(Slides3 && Pano_360ty){\r\n        clearInterval(interval)\r\n        window.Slides3 = Slides3;\r\n        window.Pano_360ty = Pano_360ty;\r\n    }\r\n})\r\n\r\n\r\n"]}